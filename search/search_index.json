{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"Home"},{"location":"license/","text":"License \u00b6 MIT License Copyright \u00a9 2016-2022 Martin Donath Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"license/#license","text":"MIT License Copyright \u00a9 2016-2022 Martin Donath Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"adicional/","text":"Video - Vint Cerf \u00b6 O primeiro passo para trabalharmos com redes \u00e9 compreender o contexto ao qual estamos inseridos e tamb\u00e9m saber o que deve ser protegido e implementado. Neste sentido, seria interessante voc\u00eas acessarem o v\u00eddeo dispon\u00edvel no link abaixo. Nele um dos criadores do TCP/IP Vint Cerf vai abordar os principais acontecimentos tecnol\u00f3gicos para entendermos o que \u00e9 a Internet e as redes de computadores. Video - OpenInfra 2022 \u00b6 OpenStack \u00e9 a plataforma de nuvem de c\u00f3digo aberto l\u00edder mundial. Ele \u00e9 usado por centenas de provedores locais de nuvem p\u00fablica , telcos e milhares de empresas , com mais de 25 milh\u00f5es de n\u00facleos sendo executados em produ\u00e7\u00e3o, de acordo com a OpenStack User Survey 2021. O OpenStack, sem d\u00favida, dominou o mercado e se tornou o padr\u00e3o de fato para c\u00f3digo aberto implementa\u00e7\u00f5es de infraestrutura em nuvem. Sua ado\u00e7\u00e3o continua a crescer e sua participa\u00e7\u00e3o de mercado deve chegar a US$ 8 bilh\u00f5es em 2023.","title":"Governanca Internet"},{"location":"adicional/#video-vint-cerf","text":"O primeiro passo para trabalharmos com redes \u00e9 compreender o contexto ao qual estamos inseridos e tamb\u00e9m saber o que deve ser protegido e implementado. Neste sentido, seria interessante voc\u00eas acessarem o v\u00eddeo dispon\u00edvel no link abaixo. Nele um dos criadores do TCP/IP Vint Cerf vai abordar os principais acontecimentos tecnol\u00f3gicos para entendermos o que \u00e9 a Internet e as redes de computadores.","title":"Video - Vint Cerf"},{"location":"adicional/#video-openinfra-2022","text":"OpenStack \u00e9 a plataforma de nuvem de c\u00f3digo aberto l\u00edder mundial. Ele \u00e9 usado por centenas de provedores locais de nuvem p\u00fablica , telcos e milhares de empresas , com mais de 25 milh\u00f5es de n\u00facleos sendo executados em produ\u00e7\u00e3o, de acordo com a OpenStack User Survey 2021. O OpenStack, sem d\u00favida, dominou o mercado e se tornou o padr\u00e3o de fato para c\u00f3digo aberto implementa\u00e7\u00f5es de infraestrutura em nuvem. Sua ado\u00e7\u00e3o continua a crescer e sua participa\u00e7\u00e3o de mercado deve chegar a US$ 8 bilh\u00f5es em 2023.","title":"Video - OpenInfra 2022"},{"location":"projetos/0.Cloud_Intro/","text":"Objetivos \u00b6 Introduzir os conceitos b\u00e1sicos sobre cloud computing. Entender os conceitos b\u00e1sicos sobre IaaS. Pr\u00e9-requisitos: Realizar leitura pr\u00e9via: Produtos da AWS Public vs Private Cloud, AWS compared to Openstack Realizar a leitura sobre Cloud Computing. [Kavis - cap. 2 e Earl et al - cap. 4] Primeira Inst\u00e2ncia \u00b6 Vamos come\u00e7ar conhecendo o ferramental b\u00e1sico da AWS para virtual machines . Acessar o dashboard do EC2 de North Virginia ( us-east-1 ). Criar uma inst\u00e2ncia t2.micro com Ubuntu 18.04 LTS server e 8Gb de disco. Renomear a m\u00e1quina com o seu nome ( Tag ). Verifique se o security group liberou a conex\u00e3o SSH externa. Importar em Key Pair a sua public key gerada na primeira aula. Coloque o seu nome na chave. Endere\u00e7o IP p\u00fablico da m\u00e1quina: Teste a conex\u00e3o SSH (n\u00e3o se esque\u00e7a da chave privada). . Voc\u00ea criou uma policy para seu usu\u00e1rio. O que s\u00e3o Policies ? Por que elas s\u00e3o importantes e devem ser bem definidas? . Dentro do contexto de Cloud Computing, defina os termos: instance , image , region , VPC , subnet , security-group . . O poder computacional das inst\u00e2ncias \u00e9 medido em vCPU. O que \u00e9 vCPU? Primeiro Deploy - Ghost Blog Platform \u00b6 Vamos fazer um deploy completo e r\u00e1pido com poucos comandos. Acesse o terminal da inst\u00e2ncia criada e execute os seguintes comandos: Atualize o S.O. $ sudo apt update Instale o conjure-up usando o snap $ sudo snap install conjure-up --classic Agora instale a plataforma Ghost $ juju add-credential aws Insira um nome e a regi\u00e3o correspondente: us-east-1 Entre com o par Access Key ID / Secret Access Key $ conjure-up battlemidget/ghost aws/us-east-1 Aguarde. Teste o deploy $ juju status Anote o IP da aplica\u00e7\u00e3o HAProxy. Acesse a plataforma: https://[IP P\u00fablico]/admin Destrua tudo: Anote o nome do controller no juju status $ juju kill-controller [controller-name] Aguarde e destrua a inst\u00e2ncia que voc\u00ea criou na AWS . Quantas inst\u00e2ncias foram criadas automaticamente? Criar inst\u00e2ncias automaticamente \u00e9 um atributo positivo ou negativo? . Quanto custou o prot\u00f3tipo? Assuma que usou uma semana de cada inst\u00e2ncia. . Dada a quantidade de computadores apontada na quest\u00e3o anterior, descreva como voc\u00ea montaria um ambiente Ghost em um Datacenter pr\u00f3prio. Assuma que voc\u00ea ainda n\u00e3o possui nenhum hardware dispon\u00edvel, apenas um or\u00e7amento aprovado. . Agora, somando o fato de que hardware deprecia com o tempo e possui um custo mensal de manuten\u00e7\u00e3o, compare em termos de custo uma Public Cloud e um Datacenter pr\u00f3prio. Como podem perceber a infraestrutura acima n\u00e3o custa barato ao longo do tempo. Talvez o uso do conjure-up/juju n\u00e3o seja o mais adequado para pequenos projetos. Outras alternativas para realizar provisionamento/implanta\u00e7\u00e3o: Terraform: https://www.terraform.io/ Ansible: https://www.ansible.com/ Puppet: https://puppet.com/ Escalabilidade \u00b6 Conforme visto na Aula 01, vamos agora fazer uso de uma das mais poderosas caracter\u00edsticas da nuvem. Crie uma inst\u00e2ncia t2.micro com Ubuntu 18.04 LTS: Renomeie a inst\u00e2ncia para Webserver $ sudo apt update; sudo apt install nodejs build-essential -y Edite um arquivo server.js: #!/usr/bin/env nodejs var http = require ( 'http' ); var os = require ( 'os' ); var crypto = require ( 'crypto' ); http . createServer ( function ( req , res ) { res . writeHead ( 200 , { 'Content-Type' : 'text/plain' }); var nonce = 1 ; var seed = Math . random (); var h = crypto . createHash ( 'sha256' ); h . update ( new Buffer ( nonce + \" Hello World \" + seed )); while ( h . digest ( \"hex\" ). substr ( 0 , 3 ) != '000' ) { h = crypto . createHash ( 'sha256' ); nonce ++ ; h . update ( new Buffer ( nonce + \" Hello World \" + seed )); } res . end ( '{ \"host\": ' + os . hostname () + ', \"nonce\": ' + nonce + '}' ); }). listen ( 8080 , '' ); console . log ( 'Server running at http://localhost:8080/' ); Execute o servi\u00e7o: $ chmod +x ./server.js $ ./server.js Libere a porta no security group correspondente. Teste o servi\u00e7o no browser. Ajustando o final: $ crontab -e\\ @reboot /home/ubuntu/server.js $ sudo reboot Teste novamente no browser. Pesquise o que faz o crontab? Simulando carga no servidor \u00b6 Uma das grande d\u00favidas de quem utiliza nuvem diz respeito a capacidade das inst\u00e2ncias utilizadas e se elas est\u00e3o dimensiondas corretamente. Nessa etapa vamos estimar essa capacidade. Crie duas novas inst\u00e2ncias t2.micro com Ubuntu 18.04 Renomeie como: Locust-master e Locust-worker Em ambas as m\u00e1quinas: $ sudo apt update && sudo apt install python3-pip -y $ pip3 install locust crie um arquivo locustfile.py no home: \\vspace{0.3cm} from locust import HttpUser , task , between class QuickstartUser ( HttpUser ): @task def index_page ( self ): self . client . get ( \"/\" ) \\vspace{0.3cm} * no master: * liberar no security group as portas 8089 e 5557 * $ python3 -m locust -f /home/ubuntu/locustfile.py --master * No worker: * ajuste o n\u00famero de conex\u00f5es no Linux:\\ $ sudo nano /etc/sysctl.conf * adicione a linha:\\ fs.file-max = 5000000 * aplique as altera\u00e7\u00f5es:\\ $ sudo sysctl -p * acerte o crontab para rodar na inicializa\u00e7\u00e3o:\\ python3 -m locust -f /home/ubuntu/locustfile.py --worker --master-host=[IP do master] * $ sudo reboot Realizando a simula\u00e7\u00e3o: acesse o locust master via browser aguarde o worker se conectar no master inicie um teste 300/10 - 300 usu\u00e1rios e hatch rate de 10 novos usu\u00e1rios por segundo. N\u00e3o caiu! - Talvez haja algumas poucas falhas. verifique que essa aplica\u00e7\u00e3o suporta cerca de 100 rps (requisi\u00e7\u00f5es por segundo). Multiplicando os usu\u00e1rios: crie uma imagem do locust-worker. Caf\u00e9. crie mais 2 inst\u00e2ncias dessa AMI, Execute um teste 600/20 - observe que h\u00e1 algumas falhas mas ainda em um percentual baixo. Agora execute um teste 1000/50 - agora complicou. Escalando Verticalmente \u00b6 pare a m\u00e1quina com o servidor http. troque para t2.2xlarge. atualize o IP no locust master, reinicie os workers e repita o teste 1000/50. Escalando Horizontalmente \u00b6 Crie uma imagem do servidor web. Caf\u00e9. Rebaixe a m\u00e1quina para t2.micro de novo. Crie mais 2 inst\u00e2ncias a partir da AMI criada. N\u00e3o esque\u00e7a de reutilizar o security group. Crie um Application LoadBalancer que mapeia inst\u00e2ncias:8080 para loadbalancer:80. Marcar todas as Availability Zones . Adicione as 3 inst\u00e2ncias no Target Group . Teste o acesso ao LoadBalancer :\\vspace{0.5cm} Endere\u00e7o DNS:\\vspace{0.5cm} Verifique no navegador que h\u00e1 uma altern\u00e2ncia do servidor. Execute novamente o teste 1000/50. Voil\u00e0! Agora vamos ativar a elasticidade da nuvem. Remova as inst\u00e2ncias do LoadBalancer. Destrue-as. Crie um Autoscalling Group : Criar um Launch Configuration da mesma configura\u00e7\u00e3o em que foi criada a inst\u00e2ncia original. Reutilizar o Security Group com as devidas libera\u00e7\u00f5es. Come\u00e7ar com 1 inst\u00e2ncia. Selecionar todas as subnets . Anexar o Target Group criado anteriormente. Selecionar: Use scaling policies to adjust the capacity of this group . Usar Request Count Per Target em 3000 (50 rps x 60 segundos) Aguarde a primeira inst\u00e2ncia subir e teste o LoadBalancer de novo. Execute o teste 1000/50 novamente. Em 3 minutos ele se ajustar\u00e1 sozinho \u00e0 demanda. Encerre o teste e em 15 minutos ir\u00e1 desativar a capacidade ociosa automaticamente. Remova tudo e n\u00e3o deixe nada rodando (Cuidado com os recursos do seu colega).","title":"Tutorial de Introducao \u00e0 AWS"},{"location":"projetos/0.Cloud_Intro/#objetivos","text":"Introduzir os conceitos b\u00e1sicos sobre cloud computing. Entender os conceitos b\u00e1sicos sobre IaaS. Pr\u00e9-requisitos: Realizar leitura pr\u00e9via: Produtos da AWS Public vs Private Cloud, AWS compared to Openstack Realizar a leitura sobre Cloud Computing. [Kavis - cap. 2 e Earl et al - cap. 4]","title":"Objetivos"},{"location":"projetos/0.Cloud_Intro/#primeira-instancia","text":"Vamos come\u00e7ar conhecendo o ferramental b\u00e1sico da AWS para virtual machines . Acessar o dashboard do EC2 de North Virginia ( us-east-1 ). Criar uma inst\u00e2ncia t2.micro com Ubuntu 18.04 LTS server e 8Gb de disco. Renomear a m\u00e1quina com o seu nome ( Tag ). Verifique se o security group liberou a conex\u00e3o SSH externa. Importar em Key Pair a sua public key gerada na primeira aula. Coloque o seu nome na chave. Endere\u00e7o IP p\u00fablico da m\u00e1quina: Teste a conex\u00e3o SSH (n\u00e3o se esque\u00e7a da chave privada). . Voc\u00ea criou uma policy para seu usu\u00e1rio. O que s\u00e3o Policies ? Por que elas s\u00e3o importantes e devem ser bem definidas? . Dentro do contexto de Cloud Computing, defina os termos: instance , image , region , VPC , subnet , security-group . . O poder computacional das inst\u00e2ncias \u00e9 medido em vCPU. O que \u00e9 vCPU?","title":"Primeira Inst\u00e2ncia"},{"location":"projetos/0.Cloud_Intro/#primeiro-deploy-ghost-blog-platform","text":"Vamos fazer um deploy completo e r\u00e1pido com poucos comandos. Acesse o terminal da inst\u00e2ncia criada e execute os seguintes comandos: Atualize o S.O. $ sudo apt update Instale o conjure-up usando o snap $ sudo snap install conjure-up --classic Agora instale a plataforma Ghost $ juju add-credential aws Insira um nome e a regi\u00e3o correspondente: us-east-1 Entre com o par Access Key ID / Secret Access Key $ conjure-up battlemidget/ghost aws/us-east-1 Aguarde. Teste o deploy $ juju status Anote o IP da aplica\u00e7\u00e3o HAProxy. Acesse a plataforma: https://[IP P\u00fablico]/admin Destrua tudo: Anote o nome do controller no juju status $ juju kill-controller [controller-name] Aguarde e destrua a inst\u00e2ncia que voc\u00ea criou na AWS . Quantas inst\u00e2ncias foram criadas automaticamente? Criar inst\u00e2ncias automaticamente \u00e9 um atributo positivo ou negativo? . Quanto custou o prot\u00f3tipo? Assuma que usou uma semana de cada inst\u00e2ncia. . Dada a quantidade de computadores apontada na quest\u00e3o anterior, descreva como voc\u00ea montaria um ambiente Ghost em um Datacenter pr\u00f3prio. Assuma que voc\u00ea ainda n\u00e3o possui nenhum hardware dispon\u00edvel, apenas um or\u00e7amento aprovado. . Agora, somando o fato de que hardware deprecia com o tempo e possui um custo mensal de manuten\u00e7\u00e3o, compare em termos de custo uma Public Cloud e um Datacenter pr\u00f3prio. Como podem perceber a infraestrutura acima n\u00e3o custa barato ao longo do tempo. Talvez o uso do conjure-up/juju n\u00e3o seja o mais adequado para pequenos projetos. Outras alternativas para realizar provisionamento/implanta\u00e7\u00e3o: Terraform: https://www.terraform.io/ Ansible: https://www.ansible.com/ Puppet: https://puppet.com/","title":"Primeiro Deploy - Ghost Blog Platform"},{"location":"projetos/0.Cloud_Intro/#escalabilidade","text":"Conforme visto na Aula 01, vamos agora fazer uso de uma das mais poderosas caracter\u00edsticas da nuvem. Crie uma inst\u00e2ncia t2.micro com Ubuntu 18.04 LTS: Renomeie a inst\u00e2ncia para Webserver $ sudo apt update; sudo apt install nodejs build-essential -y Edite um arquivo server.js: #!/usr/bin/env nodejs var http = require ( 'http' ); var os = require ( 'os' ); var crypto = require ( 'crypto' ); http . createServer ( function ( req , res ) { res . writeHead ( 200 , { 'Content-Type' : 'text/plain' }); var nonce = 1 ; var seed = Math . random (); var h = crypto . createHash ( 'sha256' ); h . update ( new Buffer ( nonce + \" Hello World \" + seed )); while ( h . digest ( \"hex\" ). substr ( 0 , 3 ) != '000' ) { h = crypto . createHash ( 'sha256' ); nonce ++ ; h . update ( new Buffer ( nonce + \" Hello World \" + seed )); } res . end ( '{ \"host\": ' + os . hostname () + ', \"nonce\": ' + nonce + '}' ); }). listen ( 8080 , '' ); console . log ( 'Server running at http://localhost:8080/' ); Execute o servi\u00e7o: $ chmod +x ./server.js $ ./server.js Libere a porta no security group correspondente. Teste o servi\u00e7o no browser. Ajustando o final: $ crontab -e\\ @reboot /home/ubuntu/server.js $ sudo reboot Teste novamente no browser. Pesquise o que faz o crontab?","title":"Escalabilidade"},{"location":"projetos/0.Cloud_Intro/#simulando-carga-no-servidor","text":"Uma das grande d\u00favidas de quem utiliza nuvem diz respeito a capacidade das inst\u00e2ncias utilizadas e se elas est\u00e3o dimensiondas corretamente. Nessa etapa vamos estimar essa capacidade. Crie duas novas inst\u00e2ncias t2.micro com Ubuntu 18.04 Renomeie como: Locust-master e Locust-worker Em ambas as m\u00e1quinas: $ sudo apt update && sudo apt install python3-pip -y $ pip3 install locust crie um arquivo locustfile.py no home: \\vspace{0.3cm} from locust import HttpUser , task , between class QuickstartUser ( HttpUser ): @task def index_page ( self ): self . client . get ( \"/\" ) \\vspace{0.3cm} * no master: * liberar no security group as portas 8089 e 5557 * $ python3 -m locust -f /home/ubuntu/locustfile.py --master * No worker: * ajuste o n\u00famero de conex\u00f5es no Linux:\\ $ sudo nano /etc/sysctl.conf * adicione a linha:\\ fs.file-max = 5000000 * aplique as altera\u00e7\u00f5es:\\ $ sudo sysctl -p * acerte o crontab para rodar na inicializa\u00e7\u00e3o:\\ python3 -m locust -f /home/ubuntu/locustfile.py --worker --master-host=[IP do master] * $ sudo reboot Realizando a simula\u00e7\u00e3o: acesse o locust master via browser aguarde o worker se conectar no master inicie um teste 300/10 - 300 usu\u00e1rios e hatch rate de 10 novos usu\u00e1rios por segundo. N\u00e3o caiu! - Talvez haja algumas poucas falhas. verifique que essa aplica\u00e7\u00e3o suporta cerca de 100 rps (requisi\u00e7\u00f5es por segundo). Multiplicando os usu\u00e1rios: crie uma imagem do locust-worker. Caf\u00e9. crie mais 2 inst\u00e2ncias dessa AMI, Execute um teste 600/20 - observe que h\u00e1 algumas falhas mas ainda em um percentual baixo. Agora execute um teste 1000/50 - agora complicou.","title":"Simulando carga no servidor"},{"location":"projetos/0.Cloud_Intro/#escalando-verticalmente","text":"pare a m\u00e1quina com o servidor http. troque para t2.2xlarge. atualize o IP no locust master, reinicie os workers e repita o teste 1000/50.","title":"Escalando Verticalmente"},{"location":"projetos/0.Cloud_Intro/#escalando-horizontalmente","text":"Crie uma imagem do servidor web. Caf\u00e9. Rebaixe a m\u00e1quina para t2.micro de novo. Crie mais 2 inst\u00e2ncias a partir da AMI criada. N\u00e3o esque\u00e7a de reutilizar o security group. Crie um Application LoadBalancer que mapeia inst\u00e2ncias:8080 para loadbalancer:80. Marcar todas as Availability Zones . Adicione as 3 inst\u00e2ncias no Target Group . Teste o acesso ao LoadBalancer :\\vspace{0.5cm} Endere\u00e7o DNS:\\vspace{0.5cm} Verifique no navegador que h\u00e1 uma altern\u00e2ncia do servidor. Execute novamente o teste 1000/50. Voil\u00e0! Agora vamos ativar a elasticidade da nuvem. Remova as inst\u00e2ncias do LoadBalancer. Destrue-as. Crie um Autoscalling Group : Criar um Launch Configuration da mesma configura\u00e7\u00e3o em que foi criada a inst\u00e2ncia original. Reutilizar o Security Group com as devidas libera\u00e7\u00f5es. Come\u00e7ar com 1 inst\u00e2ncia. Selecionar todas as subnets . Anexar o Target Group criado anteriormente. Selecionar: Use scaling policies to adjust the capacity of this group . Usar Request Count Per Target em 3000 (50 rps x 60 segundos) Aguarde a primeira inst\u00e2ncia subir e teste o LoadBalancer de novo. Execute o teste 1000/50 novamente. Em 3 minutos ele se ajustar\u00e1 sozinho \u00e0 demanda. Encerre o teste e em 15 minutos ir\u00e1 desativar a capacidade ociosa automaticamente. Remova tudo e n\u00e3o deixe nada rodando (Cuidado com os recursos do seu colega).","title":"Escalando Horizontalmente"},{"location":"projetos/changelog/","text":"Changelog \u00b6 Material for MkDocs Insiders \u00b6 4.21.1 _ August 13, 2022 \u00b6 Fixed #4176 : Broken image when avatar is served by Gravatar Fixed #4212 : Deferred search initialization for file:// locations 4.21.0 _ July 17, 2022 \u00b6 Added meta plugin: set front matter for all pages in a folder Fixed #4114 : Tags plugin fails if only tags_extra_files is set 4.20.1 _ July 11, 2022 \u00b6 Fixed #4105 : Tags plugin fails if tags_file is not set (4.20.0 regression) 4.20.0 _ July 7, 2022 \u00b6 Added support for additional tags indexes Fixed #4100 : Tag icons not shown in tags index 4.19.2 _ July 4, 2022 \u00b6 Fixed #4051 : Privacy plugin fails if symlinking isn't allowed on Windows 4.19.1 _ June 25, 2022 \u00b6 Added mkdocs-git-committers-plugin to Dockerfile Added mkdocs-git-revision-date-localized-plugin to Dockerfile 4.19.0 _ June 24, 2022 \u00b6 Added support for document contributors Updated French translations for cookie consent 4.18.2 _ June 16, 2022 \u00b6 Fixed #4026 : Fixed tooltips not mounted for nested navigation links 4.18.1 _ June 14, 2022 \u00b6 Fixed #3990 : Chinese search highlighting not working on non-boundaries 4.18.0 _ June 11, 2022 \u00b6 Added support for automatic dark/light mode Fixed #4009 : Privacy plugin uses invalid paths for file cache on Windows 4.17.2 _ June 5, 2022 \u00b6 Added support for custom jieba dictionaries (Chinese search) 4.17.1 _ June 5, 2022 \u00b6 Added support for cookie consent reject button Added support for cookie consent custom button ordering Fixed #3988 : Content tab not focused after alternating anchor links 4.17.0 _ June 4, 2022 \u00b6 Added support for content tabs anchor links (deep linking) Fixed #3975 : Detect composition events in search interface (Chinese) Fixed #3980 : Search plugin doesn't use title set via front matter 4.16.2 _ May 29, 2022 \u00b6 Fixed #3961 : Nested sections triggered build error for navigation tabs 4.16.1 _ May 28, 2022 \u00b6 Switched feedback widget rating titles to tooltips Improved contrast of link colors for light/dark color schemes Fixed #3950 : Sticky navigation tabs rendering broken (4.15.2 regression) Fixed #3958 : Links invisible when using white primary color 4.16.0 _ May 25, 2022 \u00b6 Added support for navigation pruning Fixed search results for non-segmented characters (4.15.2 regression) 4.15.2 _ May 22, 2022 \u00b6 Removed workaround for abbr on touch devices (superseded by tooltips) Fixed #3915 : Improved Chinese search query segmentation Fixed #3938 : Fixed tooltips position for navigation titles with ellipsis 4.15.1 _ May 14, 2022 \u00b6 Improved performance of element focus obervables Fixed #3531 : Added prev/next buttons to content tabs Fixed tooltip positioning when host element is hidden 4.15.0 _ May 8, 2022 \u00b6 Added support for improved tooltips Fixed #3785 : Show tooltip on hover for overflowing navigation link 4.14.0 _ May 5, 2022 \u00b6 Added Chinese language support to built-in search plugin Fixed all-numeric page titles raising error in social plugin 4.13.2 _ April 30, 2022 \u00b6 Improved caching of downloaded resources in privacy plugin Fixed #3851 : External images not downloaded by privacy plugin 4.13.1 _ April 25, 2022 \u00b6 Fixed #3839 : Tags plugin breaks without icons (4.13.0 regression) 4.13.0 _ April 24, 2022 \u00b6 Added support for tag icons 4.12.0 _ March 27, 2022 \u00b6 Added support for card grids and grid layouts Fixed #3685 : Annotations sometimes broken when using instant loading Fixed #3742 : Automatically add Mermaid.js when building for offline usage 4.11.0 _ March 6, 2022 \u00b6 Added support for excluding external assets from privacy plugin 4.10.1 _ March 2, 2022 \u00b6 Added missing build dependencies to Dockerfile Fixed encoding issues in privacy plugin, now forcing UTF-8 encoding Fixed #3624 : Scroll to active navigation item unreliable in Firefox Fixed #3642 : Privacy plugin errors when font setting was omitted 4.10.0 _ February 27, 2022 \u00b6 Added support for offline plugin (supersedes offline search support) Improved built-in privacy plugin to download nested JavaScript assets Refactored configuration of built-in privacy plugin 4.9.1 _ February 21, 2022 \u00b6 Fixed #3610 : missing lxml dependency for privacy plugin Fixed error when charset is missing in content-type header 4.9.0 _ February 20, 2022 \u00b6 Added privacy plugin: automatic downloading of external assets 4.8.3 _ February 13, 2022 \u00b6 Fixed #3560 : Mermaid diagrams don't render for file:// locations 4.8.2 _ February 10, 2022 \u00b6 Fixed #3559 : Mermaid diagrams don't render inside closed details 4.8.1 _ February 6, 2022 \u00b6 Fixed jump back to top on mobile when using anchor following 4.8.0 _ February 6, 2022 \u00b6 Added support for anchor following table of contents (= auto scroll) 4.7.2 _ February 2, 2022 \u00b6 Fixed #3526 : Transparent sidebar title due to Safari bug Fixed #3528 : Firefox sometimes clips text in flow chart diagrams 4.7.1 _ January 30, 2022 \u00b6 Fixed #3506 : Tags index not respecting title set via front matter 4.7.0 _ January 25, 2022 \u00b6 Added native support for offline search 4.6.1 _ January 16, 2022 \u00b6 Fixed #3459 : Section index pages picking up wrong title 4.6.0 _ January 11, 2022 \u00b6 Added support for annotations (outside of code blocks) 4.5.2 _ January 8, 2022 \u00b6 Fixed #3440 : Content tab indicator not moving when using linking Fixed #3445 : Content tab switch flickers/jitters when using linking 4.5.1 _ January 2, 2022 \u00b6 Added support for setting initial state of cookie consent Fixed #3396 : Disappearing link in navigation due to Safari bug 4.5.0 _ December 16, 2021 \u00b6 Added support for navigation icons 4.4.0 _ December 10, 2021 \u00b6 Added support for code annotation anchor links (deep linking) Added new code annotation syntax modifier to strip comment Updated German translations for cookie consent 4.3.0 _ December 5, 2021 \u00b6 Added support for custom fonts in social cards Fixed #3300 : Announcement bar reappearing when using instant loading 4.2.0 _ December 2, 2021 \u00b6 Added support for dismissable announcement bar Added support for named placeholders in feedback widget 4.1.0 _ November 30, 2021 \u00b6 Added support for passing page title to feedback forms 4.0.0 _ November 28, 2021 \u00b6 Removed deprecated content tabs legacy implementation Removed deprecated seealso admonition type Removed deprecated site_keywords setting (unsupported by MkDocs) Removed deprecated prebuilt search index support Removed deprecated web app manifest \u2013 use customization Removed extracopyright variable \u2013 use new copyright partial Removed Disqus integation \u2013 use customization Switched to :is() selectors for simple selector lists Switched autoprefixer from last 4 years to last 2 years Improved CSS overall to match modern standards Improved CSS variable semantics for fonts Improved extensibility by restructuring partials Improved handling of details when printing Improved keyboard navigation for footnotes Fixed #3214 : Search highlighting breaks site when empty 3.2.3 _ November 20, 2021 \u00b6 Updated Swedish and French translations Removed support for .mermaid-experimental class (now .mermaid ) Fixed #3202 : Cookie consent not dismissable on file:// locations Fixed #3216 : Cookie consent not dismissed when invoked via anchor Fixed #3232 : Mermaid.js sometimes runs twice (race condition) 3.2.2 _ November 6, 2021 \u00b6 Fixed always last feedback rating being sent Fixed #3145 : Code annotations eat whole comment lines Fixed #3170 : Feedback widget doesn't send data to GA4 3.2.1 _ November 4, 2021 \u00b6 Added support for custom Mermaid.js version via additional JavaScript Fixed some configuration edge cases for tags plugin (3.1.5 regression) Fixed feedback widget title not being centered in Firefox Fixed #3179 : Safari doesn't send request for feedback widget 3.2.0 _ October 31, 2021 \u00b6 Added support for feedback widget (Was this page helpful?) 3.1.5 _ October 28, 2021 \u00b6 Fixed #3144 : Rogue link when using tags with auto-populated navigation Fixed #3147 : Code block line numbers appear in search results Fixed #3158 : Social cards do not strip HTML tags from title 3.1.4 _ October 17, 2021 \u00b6 Fixed #2974 : Text cropped with other fonts than Roboto in social plugin Fixed #3099 : Encoding problems with non-latin character in social plugin Fixed #3112 : Japanese segmenter not executed as part of new tokenizer Fixed tags (front matter) appearing in search with disabled tags plugin 3.1.3 _ October 12, 2021 \u00b6 Added warnings to search plugin for unsupported options and syntax Fixed #3503 : Search sometimes returns entire page Fixed #3089 : Single-line code annotations disappear when printing 3.1.2 _ October 6, 2021 \u00b6 Fixed incorrect path separators for social cards on Windows 3.1.1 _ September 26, 2021 \u00b6 Fixed ordering bug in search exclusion logic 3.1.0 _ September 26, 2021 \u00b6 Added support for excluding pages, sections, and elements from search Fixed #2803 : Code block annotations not visible when printing 3.0.1 _ September 19, 2021 \u00b6 Added support for using literal h1-6 tags for search plugin Fixed search plugin breaking on void elements without slashes Fixed search plugin filtering link contents from headlines Fixed search plugin handling of multiple h1 headlines Fixed search plugin handling of missing h1 headlines 3.0.0 _ September 13, 2021 \u00b6 Rewrite of MkDocs' search plugin Added support for rich search previews Added support for tokenizer with lookahead Improved search indexing performance (twice as fast) Improved search highlighting 2.13.3 _ September 1, 2021 \u00b6 Added support for disabling social card generation 2.13.2 _ August 25, 2021 \u00b6 Fixed #2965 : Social plugin error when primary color is not defined 2.13.1 _ August 21, 2021 \u00b6 Fixed #2948 : Social cards are not cached Fixed #2953 : Mermaid.js diagrams can't be centered anymore 2.13.0 _ August 7, 2021 \u00b6 Added support for custom colors in social cards 2.12.2 _ August 4, 2021 \u00b6 Fixed #2891 : Division by zero error in social plugin 2.12.1 _ July 26, 2021 \u00b6 Fixed error in social plugin when site_description was not set Fixed error in social plugin for non-ASCII characters 2.12.0 _ July 25, 2021 \u00b6 Added support for social cards 2.11.1 _ July 20, 2021 \u00b6 Fixed order of tags index, now sorted alphabetically 2.11.0 _ July 18, 2021 \u00b6 Improved Mermaid.js intergration, now stable Added support for sequence diagrams Added support for entity relationship diagrams Added support for cookie consent configuration Added feature flag to always enable annotations 2.10.0 _ July 10, 2021 \u00b6 Added support for cookie consent Fixed #2807 : Back-to-top button not hidden when using sticky tabs 2.9.2 _ May 30, 2021 \u00b6 Moved tags to partial for easier customization Added support for hiding tags on any page 2.9.1 _ May 24, 2021 \u00b6 Added missing guard for linking of content tabs 2.9.0 _ May 23, 2021 \u00b6 Added support for linking of content tabs 2.8.0 _ May 12, 2021 \u00b6 Added support for boosting pages in search 2.7.2 _ May 8, 2021 \u00b6 Fixed #2638 : Warnings shown when using tags plugin without directory URLs 2.7.1 _ May 3, 2021 \u00b6 Fixed git-revision-date-localized plugin integration (2.7.0 regression) 2.7.0 _ May 1, 2021 \u00b6 Added support for tags (with search integration) 2.6.0 _ April 11, 2021 \u00b6 Stay on page when switching versions 2.5.0 _ March 28, 2021 \u00b6 Added support for version warning 2.4.0 _ March 20, 2021 \u00b6 Added support for custom admonition icons Fixed #2444 : Code block annotations with extra comments have wrong index 2.3.1 _ March 14, 2021 \u00b6 Fixed anchor offset for permalinks when using sticky navigation tabs 2.3.0 _ March 13, 2021 \u00b6 Added support for back-to-top button 2.2.1 _ March 4, 2021 \u00b6 Fixed #2382 : Repository stats failing when no release tag is present 2.2.0 _ February 28, 2021 \u00b6 Added support for code block annotations 2.1.0 _ February 26, 2021 \u00b6 Added support for anchor tracking 2.0.0 _ February 24, 2021 \u00b6 Migrated Insiders to the new architecture Swapped color palette toggle configuration 1.17.0 _ January 31, 2021 \u00b6 Added support for section index pages 1.16.1 _ January 26, 2021 \u00b6 Fixed #2249 : Instant loading + sticky tabs result in invalid links Fixed #2248 : Search highlighting URL parameter always added Fixed #2235 : Version selector doesn't select current version for aliases 1.16.0 _ January 7, 2021 \u00b6 Added latest release to repository info (GitHub) Slight facelift of repository info (lighter fonts, spacing and icons) 1.15.0 _ January 2, 2021 \u00b6 Added support for native Mermaid.js integration 1.14.0 _ December 30, 2020 \u00b6 Added support for sharing searches 1.13.2 _ December 22, 2020 \u00b6 Fixed version selector + sticky tabs navigation rendering issues Fixed version selector wrapping 1.13.1 _ December 20, 2020 \u00b6 Removed horizontal scrollbars on language and version selector Fixed type conversion in JavaScript config 1.13.0 _ December 13, 2020 \u00b6 Refactored navigation tabs to simplify grouping behavior Added support for sticky navigation tabs Added support for arbitrary links in navigation tabs Fixed #2098 : Subsequent active subsection not highlighted correctly 1.12.1 _ December 8, 2020 \u00b6 Fixed empty language selector being shown 1.12.0 _ December 6, 2020 \u00b6 Added support for adding a language selector 1.11.2 _ November 29, 2020 \u00b6 Fixed #2068 : Search highlight interprets code blocks as JavaScript 1.11.1 _ November 29, 2020 \u00b6 Refactored styling to be more stable and easier to adjust Fixed some styling regressions from latest features 1.11.0 _ November 22, 2020 \u00b6 Added support for rendering admonitions as inline blocks 1.10.0 _ November 15, 2020 \u00b6 Added support for integrating table of contents into navigation 1.9.0 _ November 7, 2020 \u00b6 Added support for hiding navigation and table of contents on any page Removed autohiding table of contents when empty 1.8.0 _ November 1, 2020 \u00b6 Added support for navigation sections Fixed appearance of inactive search suggestions 1.7.0 _ October 25, 2020 \u00b6 Added support for deploying multiple versions Fixed alignment of sidebar when content area is too small 1.6.0 _ October 11, 2020 \u00b6 Added support for search suggestions to save keystrokes Added support for removing Made with Material for MkDocs from footer Fixed #1915 : search should go to first result by pressing Enter 1.5.1 _ September 21, 2020 \u00b6 Fixed content area stretching to whole width for long code blocks 1.5.0 _ September 19, 2020 \u00b6 Added support for autohiding table of contents when empty 1.4.1 _ September 6, 2020 \u00b6 Improved typeahead and search result relevance and scoring 1.4.0 _ August 30, 2020 \u00b6 Added support for autohiding header on scroll 1.3.0 _ August 26, 2020 \u00b6 Added support for user-selectable color palettes 1.2.0 _ August 11, 2020 \u00b6 Added feature to expand navigation by default 1.1.0 _ August 3, 2020 \u00b6 Added highlighting of search results 1.0.0 _ July 14, 2020 \u00b6 Added grouping of search results Added missing query terms to search result Improved search result relevance and scoring","title":"Changelog"},{"location":"projetos/changelog/#changelog","text":"","title":"Changelog"},{"location":"projetos/changelog/#material-for-mkdocs-insiders","text":"","title":"Material for MkDocs Insiders"},{"location":"projetos/changelog/#4.21.1","text":"Fixed #4176 : Broken image when avatar is served by Gravatar Fixed #4212 : Deferred search initialization for file:// locations","title":"4.21.1 _ August 13, 2022"},{"location":"projetos/changelog/#4.21.0","text":"Added meta plugin: set front matter for all pages in a folder Fixed #4114 : Tags plugin fails if only tags_extra_files is set","title":"4.21.0 _ July 17, 2022"},{"location":"projetos/changelog/#4.20.1","text":"Fixed #4105 : Tags plugin fails if tags_file is not set (4.20.0 regression)","title":"4.20.1 _ July 11, 2022"},{"location":"projetos/changelog/#4.20.0","text":"Added support for additional tags indexes Fixed #4100 : Tag icons not shown in tags index","title":"4.20.0 _ July 7, 2022"},{"location":"projetos/changelog/#4.19.2","text":"Fixed #4051 : Privacy plugin fails if symlinking isn't allowed on Windows","title":"4.19.2 _ July 4, 2022"},{"location":"projetos/changelog/#4.19.1","text":"Added mkdocs-git-committers-plugin to Dockerfile Added mkdocs-git-revision-date-localized-plugin to Dockerfile","title":"4.19.1 _ June 25, 2022"},{"location":"projetos/changelog/#4.19.0","text":"Added support for document contributors Updated French translations for cookie consent","title":"4.19.0 _ June 24, 2022"},{"location":"projetos/changelog/#4.18.2","text":"Fixed #4026 : Fixed tooltips not mounted for nested navigation links","title":"4.18.2 _ June 16, 2022"},{"location":"projetos/changelog/#4.18.1","text":"Fixed #3990 : Chinese search highlighting not working on non-boundaries","title":"4.18.1 _ June 14, 2022"},{"location":"projetos/changelog/#4.18.0","text":"Added support for automatic dark/light mode Fixed #4009 : Privacy plugin uses invalid paths for file cache on Windows","title":"4.18.0 _ June 11, 2022"},{"location":"projetos/changelog/#4.17.2","text":"Added support for custom jieba dictionaries (Chinese search)","title":"4.17.2 _ June 5, 2022"},{"location":"projetos/changelog/#4.17.1","text":"Added support for cookie consent reject button Added support for cookie consent custom button ordering Fixed #3988 : Content tab not focused after alternating anchor links","title":"4.17.1 _ June 5, 2022"},{"location":"projetos/changelog/#4.17.0","text":"Added support for content tabs anchor links (deep linking) Fixed #3975 : Detect composition events in search interface (Chinese) Fixed #3980 : Search plugin doesn't use title set via front matter","title":"4.17.0 _ June 4, 2022"},{"location":"projetos/changelog/#4.16.2","text":"Fixed #3961 : Nested sections triggered build error for navigation tabs","title":"4.16.2 _ May 29, 2022"},{"location":"projetos/changelog/#4.16.1","text":"Switched feedback widget rating titles to tooltips Improved contrast of link colors for light/dark color schemes Fixed #3950 : Sticky navigation tabs rendering broken (4.15.2 regression) Fixed #3958 : Links invisible when using white primary color","title":"4.16.1 _ May 28, 2022"},{"location":"projetos/changelog/#4.16.0","text":"Added support for navigation pruning Fixed search results for non-segmented characters (4.15.2 regression)","title":"4.16.0 _ May 25, 2022"},{"location":"projetos/changelog/#4.15.2","text":"Removed workaround for abbr on touch devices (superseded by tooltips) Fixed #3915 : Improved Chinese search query segmentation Fixed #3938 : Fixed tooltips position for navigation titles with ellipsis","title":"4.15.2 _ May 22, 2022"},{"location":"projetos/changelog/#4.15.1","text":"Improved performance of element focus obervables Fixed #3531 : Added prev/next buttons to content tabs Fixed tooltip positioning when host element is hidden","title":"4.15.1 _ May 14, 2022"},{"location":"projetos/changelog/#4.15.0","text":"Added support for improved tooltips Fixed #3785 : Show tooltip on hover for overflowing navigation link","title":"4.15.0 _ May 8, 2022"},{"location":"projetos/changelog/#4.14.0","text":"Added Chinese language support to built-in search plugin Fixed all-numeric page titles raising error in social plugin","title":"4.14.0 _ May 5, 2022"},{"location":"projetos/changelog/#4.13.2","text":"Improved caching of downloaded resources in privacy plugin Fixed #3851 : External images not downloaded by privacy plugin","title":"4.13.2 _ April 30, 2022"},{"location":"projetos/changelog/#4.13.1","text":"Fixed #3839 : Tags plugin breaks without icons (4.13.0 regression)","title":"4.13.1 _ April 25, 2022"},{"location":"projetos/changelog/#4.13.0","text":"Added support for tag icons","title":"4.13.0 _ April 24, 2022"},{"location":"projetos/changelog/#4.12.0","text":"Added support for card grids and grid layouts Fixed #3685 : Annotations sometimes broken when using instant loading Fixed #3742 : Automatically add Mermaid.js when building for offline usage","title":"4.12.0 _ March 27, 2022"},{"location":"projetos/changelog/#4.11.0","text":"Added support for excluding external assets from privacy plugin","title":"4.11.0 _ March 6, 2022"},{"location":"projetos/changelog/#4.10.1","text":"Added missing build dependencies to Dockerfile Fixed encoding issues in privacy plugin, now forcing UTF-8 encoding Fixed #3624 : Scroll to active navigation item unreliable in Firefox Fixed #3642 : Privacy plugin errors when font setting was omitted","title":"4.10.1 _ March 2, 2022"},{"location":"projetos/changelog/#4.10.0","text":"Added support for offline plugin (supersedes offline search support) Improved built-in privacy plugin to download nested JavaScript assets Refactored configuration of built-in privacy plugin","title":"4.10.0 _ February 27, 2022"},{"location":"projetos/changelog/#4.9.1","text":"Fixed #3610 : missing lxml dependency for privacy plugin Fixed error when charset is missing in content-type header","title":"4.9.1 _ February 21, 2022"},{"location":"projetos/changelog/#4.9.0","text":"Added privacy plugin: automatic downloading of external assets","title":"4.9.0 _ February 20, 2022"},{"location":"projetos/changelog/#4.8.3","text":"Fixed #3560 : Mermaid diagrams don't render for file:// locations","title":"4.8.3 _ February 13, 2022"},{"location":"projetos/changelog/#4.8.2","text":"Fixed #3559 : Mermaid diagrams don't render inside closed details","title":"4.8.2 _ February 10, 2022"},{"location":"projetos/changelog/#4.8.1","text":"Fixed jump back to top on mobile when using anchor following","title":"4.8.1 _ February 6, 2022"},{"location":"projetos/changelog/#4.8.0","text":"Added support for anchor following table of contents (= auto scroll)","title":"4.8.0 _ February 6, 2022"},{"location":"projetos/changelog/#4.7.2","text":"Fixed #3526 : Transparent sidebar title due to Safari bug Fixed #3528 : Firefox sometimes clips text in flow chart diagrams","title":"4.7.2 _ February 2, 2022"},{"location":"projetos/changelog/#4.7.1","text":"Fixed #3506 : Tags index not respecting title set via front matter","title":"4.7.1 _ January 30, 2022"},{"location":"projetos/changelog/#4.7.0","text":"Added native support for offline search","title":"4.7.0 _ January 25, 2022"},{"location":"projetos/changelog/#4.6.1","text":"Fixed #3459 : Section index pages picking up wrong title","title":"4.6.1 _ January 16, 2022"},{"location":"projetos/changelog/#4.6.0","text":"Added support for annotations (outside of code blocks)","title":"4.6.0 _ January 11, 2022"},{"location":"projetos/changelog/#4.5.2","text":"Fixed #3440 : Content tab indicator not moving when using linking Fixed #3445 : Content tab switch flickers/jitters when using linking","title":"4.5.2 _ January 8, 2022"},{"location":"projetos/changelog/#4.5.1","text":"Added support for setting initial state of cookie consent Fixed #3396 : Disappearing link in navigation due to Safari bug","title":"4.5.1 _ January 2, 2022"},{"location":"projetos/changelog/#4.5.0","text":"Added support for navigation icons","title":"4.5.0 _ December 16, 2021"},{"location":"projetos/changelog/#4.4.0","text":"Added support for code annotation anchor links (deep linking) Added new code annotation syntax modifier to strip comment Updated German translations for cookie consent","title":"4.4.0 _ December 10, 2021"},{"location":"projetos/changelog/#4.3.0","text":"Added support for custom fonts in social cards Fixed #3300 : Announcement bar reappearing when using instant loading","title":"4.3.0 _ December 5, 2021"},{"location":"projetos/changelog/#4.2.0","text":"Added support for dismissable announcement bar Added support for named placeholders in feedback widget","title":"4.2.0 _ December 2, 2021"},{"location":"projetos/changelog/#4.1.0","text":"Added support for passing page title to feedback forms","title":"4.1.0 _ November 30, 2021"},{"location":"projetos/changelog/#4.0.0","text":"Removed deprecated content tabs legacy implementation Removed deprecated seealso admonition type Removed deprecated site_keywords setting (unsupported by MkDocs) Removed deprecated prebuilt search index support Removed deprecated web app manifest \u2013 use customization Removed extracopyright variable \u2013 use new copyright partial Removed Disqus integation \u2013 use customization Switched to :is() selectors for simple selector lists Switched autoprefixer from last 4 years to last 2 years Improved CSS overall to match modern standards Improved CSS variable semantics for fonts Improved extensibility by restructuring partials Improved handling of details when printing Improved keyboard navigation for footnotes Fixed #3214 : Search highlighting breaks site when empty","title":"4.0.0 _ November 28, 2021"},{"location":"projetos/changelog/#3.2.3","text":"Updated Swedish and French translations Removed support for .mermaid-experimental class (now .mermaid ) Fixed #3202 : Cookie consent not dismissable on file:// locations Fixed #3216 : Cookie consent not dismissed when invoked via anchor Fixed #3232 : Mermaid.js sometimes runs twice (race condition)","title":"3.2.3 _ November 20, 2021"},{"location":"projetos/changelog/#3.2.2","text":"Fixed always last feedback rating being sent Fixed #3145 : Code annotations eat whole comment lines Fixed #3170 : Feedback widget doesn't send data to GA4","title":"3.2.2 _ November 6, 2021"},{"location":"projetos/changelog/#3.2.1","text":"Added support for custom Mermaid.js version via additional JavaScript Fixed some configuration edge cases for tags plugin (3.1.5 regression) Fixed feedback widget title not being centered in Firefox Fixed #3179 : Safari doesn't send request for feedback widget","title":"3.2.1 _ November 4, 2021"},{"location":"projetos/changelog/#3.2.0","text":"Added support for feedback widget (Was this page helpful?)","title":"3.2.0 _ October 31, 2021"},{"location":"projetos/changelog/#3.1.5","text":"Fixed #3144 : Rogue link when using tags with auto-populated navigation Fixed #3147 : Code block line numbers appear in search results Fixed #3158 : Social cards do not strip HTML tags from title","title":"3.1.5 _ October 28, 2021"},{"location":"projetos/changelog/#3.1.4","text":"Fixed #2974 : Text cropped with other fonts than Roboto in social plugin Fixed #3099 : Encoding problems with non-latin character in social plugin Fixed #3112 : Japanese segmenter not executed as part of new tokenizer Fixed tags (front matter) appearing in search with disabled tags plugin","title":"3.1.4 _ October 17, 2021"},{"location":"projetos/changelog/#3.1.3","text":"Added warnings to search plugin for unsupported options and syntax Fixed #3503 : Search sometimes returns entire page Fixed #3089 : Single-line code annotations disappear when printing","title":"3.1.3 _ October 12, 2021"},{"location":"projetos/changelog/#3.1.2","text":"Fixed incorrect path separators for social cards on Windows","title":"3.1.2 _ October 6, 2021"},{"location":"projetos/changelog/#3.1.1","text":"Fixed ordering bug in search exclusion logic","title":"3.1.1 _ September 26, 2021"},{"location":"projetos/changelog/#3.1.0","text":"Added support for excluding pages, sections, and elements from search Fixed #2803 : Code block annotations not visible when printing","title":"3.1.0 _ September 26, 2021"},{"location":"projetos/changelog/#3.0.1","text":"Added support for using literal h1-6 tags for search plugin Fixed search plugin breaking on void elements without slashes Fixed search plugin filtering link contents from headlines Fixed search plugin handling of multiple h1 headlines Fixed search plugin handling of missing h1 headlines","title":"3.0.1 _ September 19, 2021"},{"location":"projetos/changelog/#3.0.0","text":"Rewrite of MkDocs' search plugin Added support for rich search previews Added support for tokenizer with lookahead Improved search indexing performance (twice as fast) Improved search highlighting","title":"3.0.0 _ September 13, 2021"},{"location":"projetos/changelog/#2.13.3","text":"Added support for disabling social card generation","title":"2.13.3 _ September 1, 2021"},{"location":"projetos/changelog/#2.13.2","text":"Fixed #2965 : Social plugin error when primary color is not defined","title":"2.13.2 _ August 25, 2021"},{"location":"projetos/changelog/#2.13.1","text":"Fixed #2948 : Social cards are not cached Fixed #2953 : Mermaid.js diagrams can't be centered anymore","title":"2.13.1 _ August 21, 2021"},{"location":"projetos/changelog/#2.13.0","text":"Added support for custom colors in social cards","title":"2.13.0 _ August 7, 2021"},{"location":"projetos/changelog/#2.12.2","text":"Fixed #2891 : Division by zero error in social plugin","title":"2.12.2 _ August 4, 2021"},{"location":"projetos/changelog/#2.12.1","text":"Fixed error in social plugin when site_description was not set Fixed error in social plugin for non-ASCII characters","title":"2.12.1 _ July 26, 2021"},{"location":"projetos/changelog/#2.12.0","text":"Added support for social cards","title":"2.12.0 _ July 25, 2021"},{"location":"projetos/changelog/#2.11.1","text":"Fixed order of tags index, now sorted alphabetically","title":"2.11.1 _ July 20, 2021"},{"location":"projetos/changelog/#2.11.0","text":"Improved Mermaid.js intergration, now stable Added support for sequence diagrams Added support for entity relationship diagrams Added support for cookie consent configuration Added feature flag to always enable annotations","title":"2.11.0 _ July 18, 2021"},{"location":"projetos/changelog/#2.10.0","text":"Added support for cookie consent Fixed #2807 : Back-to-top button not hidden when using sticky tabs","title":"2.10.0 _ July 10, 2021"},{"location":"projetos/changelog/#2.9.2","text":"Moved tags to partial for easier customization Added support for hiding tags on any page","title":"2.9.2 _ May 30, 2021"},{"location":"projetos/changelog/#2.9.1","text":"Added missing guard for linking of content tabs","title":"2.9.1 _ May 24, 2021"},{"location":"projetos/changelog/#2.9.0","text":"Added support for linking of content tabs","title":"2.9.0 _ May 23, 2021"},{"location":"projetos/changelog/#2.8.0","text":"Added support for boosting pages in search","title":"2.8.0 _ May 12, 2021"},{"location":"projetos/changelog/#2.7.2","text":"Fixed #2638 : Warnings shown when using tags plugin without directory URLs","title":"2.7.2 _ May 8, 2021"},{"location":"projetos/changelog/#2.7.1","text":"Fixed git-revision-date-localized plugin integration (2.7.0 regression)","title":"2.7.1 _ May 3, 2021"},{"location":"projetos/changelog/#2.7.0","text":"Added support for tags (with search integration)","title":"2.7.0 _ May 1, 2021"},{"location":"projetos/changelog/#2.6.0","text":"Stay on page when switching versions","title":"2.6.0 _ April 11, 2021"},{"location":"projetos/changelog/#2.5.0","text":"Added support for version warning","title":"2.5.0 _ March 28, 2021"},{"location":"projetos/changelog/#2.4.0","text":"Added support for custom admonition icons Fixed #2444 : Code block annotations with extra comments have wrong index","title":"2.4.0 _ March 20, 2021"},{"location":"projetos/changelog/#2.3.1","text":"Fixed anchor offset for permalinks when using sticky navigation tabs","title":"2.3.1 _ March 14, 2021"},{"location":"projetos/changelog/#2.3.0","text":"Added support for back-to-top button","title":"2.3.0 _ March 13, 2021"},{"location":"projetos/changelog/#2.2.1","text":"Fixed #2382 : Repository stats failing when no release tag is present","title":"2.2.1 _ March 4, 2021"},{"location":"projetos/changelog/#2.2.0","text":"Added support for code block annotations","title":"2.2.0 _ February 28, 2021"},{"location":"projetos/changelog/#2.1.0","text":"Added support for anchor tracking","title":"2.1.0 _ February 26, 2021"},{"location":"projetos/changelog/#2.0.0","text":"Migrated Insiders to the new architecture Swapped color palette toggle configuration","title":"2.0.0 _ February 24, 2021"},{"location":"projetos/changelog/#1.17.0","text":"Added support for section index pages","title":"1.17.0 _ January 31, 2021"},{"location":"projetos/changelog/#1.16.1","text":"Fixed #2249 : Instant loading + sticky tabs result in invalid links Fixed #2248 : Search highlighting URL parameter always added Fixed #2235 : Version selector doesn't select current version for aliases","title":"1.16.1 _ January 26, 2021"},{"location":"projetos/changelog/#1.16.0","text":"Added latest release to repository info (GitHub) Slight facelift of repository info (lighter fonts, spacing and icons)","title":"1.16.0 _ January 7, 2021"},{"location":"projetos/changelog/#1.15.0","text":"Added support for native Mermaid.js integration","title":"1.15.0 _ January 2, 2021"},{"location":"projetos/changelog/#1.14.0","text":"Added support for sharing searches","title":"1.14.0 _ December 30, 2020"},{"location":"projetos/changelog/#1.13.2","text":"Fixed version selector + sticky tabs navigation rendering issues Fixed version selector wrapping","title":"1.13.2 _ December 22, 2020"},{"location":"projetos/changelog/#1.13.1","text":"Removed horizontal scrollbars on language and version selector Fixed type conversion in JavaScript config","title":"1.13.1 _ December 20, 2020"},{"location":"projetos/changelog/#1.13.0","text":"Refactored navigation tabs to simplify grouping behavior Added support for sticky navigation tabs Added support for arbitrary links in navigation tabs Fixed #2098 : Subsequent active subsection not highlighted correctly","title":"1.13.0 _ December 13, 2020"},{"location":"projetos/changelog/#1.12.1","text":"Fixed empty language selector being shown","title":"1.12.1 _ December 8, 2020"},{"location":"projetos/changelog/#1.12.0","text":"Added support for adding a language selector","title":"1.12.0 _ December 6, 2020"},{"location":"projetos/changelog/#1.11.2","text":"Fixed #2068 : Search highlight interprets code blocks as JavaScript","title":"1.11.2 _ November 29, 2020"},{"location":"projetos/changelog/#1.11.1","text":"Refactored styling to be more stable and easier to adjust Fixed some styling regressions from latest features","title":"1.11.1 _ November 29, 2020"},{"location":"projetos/changelog/#1.11.0","text":"Added support for rendering admonitions as inline blocks","title":"1.11.0 _ November 22, 2020"},{"location":"projetos/changelog/#1.10.0","text":"Added support for integrating table of contents into navigation","title":"1.10.0 _ November 15, 2020"},{"location":"projetos/changelog/#1.9.0","text":"Added support for hiding navigation and table of contents on any page Removed autohiding table of contents when empty","title":"1.9.0 _ November 7, 2020"},{"location":"projetos/changelog/#1.8.0","text":"Added support for navigation sections Fixed appearance of inactive search suggestions","title":"1.8.0 _ November 1, 2020"},{"location":"projetos/changelog/#1.7.0","text":"Added support for deploying multiple versions Fixed alignment of sidebar when content area is too small","title":"1.7.0 _ October 25, 2020"},{"location":"projetos/changelog/#1.6.0","text":"Added support for search suggestions to save keystrokes Added support for removing Made with Material for MkDocs from footer Fixed #1915 : search should go to first result by pressing Enter","title":"1.6.0 _ October 11, 2020"},{"location":"projetos/changelog/#1.5.1","text":"Fixed content area stretching to whole width for long code blocks","title":"1.5.1 _ September 21, 2020"},{"location":"projetos/changelog/#1.5.0","text":"Added support for autohiding table of contents when empty","title":"1.5.0 _ September 19, 2020"},{"location":"projetos/changelog/#1.4.1","text":"Improved typeahead and search result relevance and scoring","title":"1.4.1 _ September 6, 2020"},{"location":"projetos/changelog/#1.4.0","text":"Added support for autohiding header on scroll","title":"1.4.0 _ August 30, 2020"},{"location":"projetos/changelog/#1.3.0","text":"Added support for user-selectable color palettes","title":"1.3.0 _ August 26, 2020"},{"location":"projetos/changelog/#1.2.0","text":"Added feature to expand navigation by default","title":"1.2.0 _ August 11, 2020"},{"location":"projetos/changelog/#1.1.0","text":"Added highlighting of search results","title":"1.1.0 _ August 3, 2020"},{"location":"projetos/changelog/#1.0.0","text":"Added grouping of search results Added missing query terms to search result Improved search result relevance and scoring","title":"1.0.0 _ July 14, 2020"},{"location":"projetos/projeto_2022/","text":"Projeto Cloud 2022 \u00b6 Infraestrutura como c\u00f3digo \u00e9 o processo de gerenciamento de infraestrutura em um arquivo ou arquivos, em vez de configurar recursos manualmente em uma dashboard. Partindo deste conceito, voc\u00ea dever\u00e1: Desenvolver uma aplica\u00e7\u00e3o capaz de provisionar uma infraestrutura por meio de uma interface amig\u00e1vel(livre escolha) para gerenciar e administr\u00e1-la (construir, alterar e deletar recursos). A rubrica abaixo pressup\u00f5e que para alcan\u00e7ar o Conceito \"B\" voc\u00ea tenha feito o Conceito \"C\" por completo. Assim, para ter \"A\" precisa que os conceitos anteriores tenham sido alcan\u00e7ados. Sua aplica\u00e7\u00e3o dever\u00e1 seguir as fun\u00e7\u00f5es (descri\u00e7\u00e3o) abaixo e a tabela completa para alcan\u00e7ar o conceito base. Conceito C+ Descri\u00e7\u00e3o CRIAR VPC cria\u00e7\u00e3o de uma VPC e sub-rede; inst\u00e2ncias : esta funcionalidade dever\u00e1 permitir a escolha de pelo menos 2 tipos de configura\u00e7\u00e3o de hosts; ainda dever\u00e1 ser poss\u00edvel aumentar e diminuir a quantidade de inst\u00e2ncias; security group : cria\u00e7\u00e3o e a associa\u00e7\u00e3o de grupos de seguran\u00e7a com inst\u00e2ncias; Usu\u00e1rio no IAM . DELETAR Inst\u00e2ncias, grupos de seguran\u00e7a e usu\u00e1rio. LISTAR Aplica\u00e7\u00e3o dever\u00e1 listar todas inst\u00e2ncias e suas regi\u00f5es, usu\u00e1rios, grupos de seguran\u00e7a e suas regras. Conceito B Descri\u00e7\u00e3o CRIAR Regras em security group; Inst\u00e2ncia em mais de uma regi\u00e3o; Associar algum tipo de restri\u00e7\u00e3o de acesso a um usu\u00e1rio; DELETAR Regras de security group; recursos implantados na Regi\u00e3o; Conceito A Descri\u00e7\u00e3o CRIAR Criar um HA de servidores web. Warning OBS: Ser\u00e1 descontado meio conceito na nota do projeto caso algum incidente ou publica\u00e7\u00e3o (vazamento) de sua chave AWS for identificada no git hub. ENTREGA Os projetos dever\u00e3o ser entregues at\u00e9 \u00e0s 23h59 do dia 25/11/2022. A entrega ser\u00e1 feita via blackboard por meio da associa\u00e7\u00e3o de seu github. Todos os projetos dever\u00e3o estar acompanhados de um roteiro (tutorial) de instala\u00e7\u00e3o e opera\u00e7\u00e3o. Ser\u00e3o sorteados/escolhidos 16 projetos para apresenta\u00e7\u00e3o no dia 01/12/2022. A publica\u00e7\u00e3o dos projetos que realizar\u00e3o a apresenta\u00e7\u00e3o ser\u00e1 no dia 28/11/2022. A apresenta\u00e7\u00e3o ser\u00e1 realizada em um tempo m\u00e1ximo de 15 minutos a partir do roteiro entregue. Falta pouco para terminar o semestre, foquem em terminar os roteiros 3 e 4 em sala e desenvolva o projeto fora do hor\u00e1rio de aula. Dica Sugerimos que voc\u00ea estude a partir de documenta\u00e7\u00f5es oficiais e tutoriais t\u00e9cnicos. * terraform.io * terraform-aws-get-started","title":"Computa\u00e7\u00e3o em Nuvem"},{"location":"projetos/projeto_2022/#projeto-cloud-2022","text":"Infraestrutura como c\u00f3digo \u00e9 o processo de gerenciamento de infraestrutura em um arquivo ou arquivos, em vez de configurar recursos manualmente em uma dashboard. Partindo deste conceito, voc\u00ea dever\u00e1: Desenvolver uma aplica\u00e7\u00e3o capaz de provisionar uma infraestrutura por meio de uma interface amig\u00e1vel(livre escolha) para gerenciar e administr\u00e1-la (construir, alterar e deletar recursos). A rubrica abaixo pressup\u00f5e que para alcan\u00e7ar o Conceito \"B\" voc\u00ea tenha feito o Conceito \"C\" por completo. Assim, para ter \"A\" precisa que os conceitos anteriores tenham sido alcan\u00e7ados. Sua aplica\u00e7\u00e3o dever\u00e1 seguir as fun\u00e7\u00f5es (descri\u00e7\u00e3o) abaixo e a tabela completa para alcan\u00e7ar o conceito base. Conceito C+ Descri\u00e7\u00e3o CRIAR VPC cria\u00e7\u00e3o de uma VPC e sub-rede; inst\u00e2ncias : esta funcionalidade dever\u00e1 permitir a escolha de pelo menos 2 tipos de configura\u00e7\u00e3o de hosts; ainda dever\u00e1 ser poss\u00edvel aumentar e diminuir a quantidade de inst\u00e2ncias; security group : cria\u00e7\u00e3o e a associa\u00e7\u00e3o de grupos de seguran\u00e7a com inst\u00e2ncias; Usu\u00e1rio no IAM . DELETAR Inst\u00e2ncias, grupos de seguran\u00e7a e usu\u00e1rio. LISTAR Aplica\u00e7\u00e3o dever\u00e1 listar todas inst\u00e2ncias e suas regi\u00f5es, usu\u00e1rios, grupos de seguran\u00e7a e suas regras. Conceito B Descri\u00e7\u00e3o CRIAR Regras em security group; Inst\u00e2ncia em mais de uma regi\u00e3o; Associar algum tipo de restri\u00e7\u00e3o de acesso a um usu\u00e1rio; DELETAR Regras de security group; recursos implantados na Regi\u00e3o; Conceito A Descri\u00e7\u00e3o CRIAR Criar um HA de servidores web. Warning OBS: Ser\u00e1 descontado meio conceito na nota do projeto caso algum incidente ou publica\u00e7\u00e3o (vazamento) de sua chave AWS for identificada no git hub. ENTREGA Os projetos dever\u00e3o ser entregues at\u00e9 \u00e0s 23h59 do dia 25/11/2022. A entrega ser\u00e1 feita via blackboard por meio da associa\u00e7\u00e3o de seu github. Todos os projetos dever\u00e3o estar acompanhados de um roteiro (tutorial) de instala\u00e7\u00e3o e opera\u00e7\u00e3o. Ser\u00e3o sorteados/escolhidos 16 projetos para apresenta\u00e7\u00e3o no dia 01/12/2022. A publica\u00e7\u00e3o dos projetos que realizar\u00e3o a apresenta\u00e7\u00e3o ser\u00e1 no dia 28/11/2022. A apresenta\u00e7\u00e3o ser\u00e1 realizada em um tempo m\u00e1ximo de 15 minutos a partir do roteiro entregue. Falta pouco para terminar o semestre, foquem em terminar os roteiros 3 e 4 em sala e desenvolva o projeto fora do hor\u00e1rio de aula. Dica Sugerimos que voc\u00ea estude a partir de documenta\u00e7\u00f5es oficiais e tutoriais t\u00e9cnicos. * terraform.io * terraform-aws-get-started","title":"Projeto Cloud 2022"},{"location":"roteiros/0.Cabeamento/","text":"Laborat\u00f3rio de Cabeamento - 1 Aula \u00b6 Objetivos: \u00b6 Conhecer os padr\u00f5es mais utilizados para o cabeamento de rede e a confec\u00e7\u00e3o de um cabo de rede. Ainda neste laborat\u00f3rio dever\u00e3o ser configurados todos os equipamentos que comp\u00f5em o kit de trabalho de cloud computing. Pr\u00e9-requisitos: Ethernet . [Tanenbaum - se\u00e7\u00f5es 2.2.2 Par tran\u00e7ado, 4.3.1 Cabeamento Ethernet, 4.3.8 Ethernet de gigabit]. Cloud Computing \u00b6 O kit cont\u00e9m os seguintes itens: Roteador TP-LINK TL-R470T+ Switch DLink DSG-1210-28 de 28 portas 6 hosts OBS: A senha do roteador est\u00e1 no invent\u00e1rio do seu kit e a do switch est\u00e1 no manual oficial. Passo 1 \u2013 Cabo de rede (Patch cord) \u00b6 O primeiro deste exerc\u00edcio \u00e9 a confec\u00e7\u00e3o do cabo de rede para a conex\u00e3o de seu computador pessoal ao ambiente do seu kit. O padr\u00e3o que ser\u00e1 utilizado \u00e9 o ANSI/TIA/EIA 568 que foi desenvolvido em 1991 pela EIA (Electronics Industries Alliance) e pela TIA (Telecommunications Industry Association), para normatizar as liga\u00e7\u00f5es el\u00e9tricas/eletr\u00f4nicas de cabos de rede e sua conectoriza\u00e7\u00e3o. Em 1995 uma revis\u00e3o \u00e9 publicada a ANSI/TIA/EIA 568A. Lapidando o projeto \u00b6 Agora realize as seguinte modifica\u00e7\u00f5es (se preciso, leia os manuais): Altere o IP do Roteador para 172.16.0.1/20. Altere o IP do Switch para 172.16.0.2/20. Modifique o DHCP server para utilizar a subrede 172.16.0.0/20. Passo 2 \u2013 conex\u00e3o dos hosts e roteador \u00b6 De Acordo com a imagem da topologia (primeira imagem), conecte todos os cabos de rede presentes em seu kit no switch, hosts e roteador; Utilize o cabo que voc\u00ea montou para interligar o seu notebook com o kit (conecte ele no switch);","title":"Roteiro Cabeamento"},{"location":"roteiros/0.Cabeamento/#laboratorio-de-cabeamento-1-aula","text":"","title":"Laborat\u00f3rio de Cabeamento - 1 Aula"},{"location":"roteiros/0.Cabeamento/#objetivos","text":"Conhecer os padr\u00f5es mais utilizados para o cabeamento de rede e a confec\u00e7\u00e3o de um cabo de rede. Ainda neste laborat\u00f3rio dever\u00e3o ser configurados todos os equipamentos que comp\u00f5em o kit de trabalho de cloud computing. Pr\u00e9-requisitos: Ethernet . [Tanenbaum - se\u00e7\u00f5es 2.2.2 Par tran\u00e7ado, 4.3.1 Cabeamento Ethernet, 4.3.8 Ethernet de gigabit].","title":"Objetivos:"},{"location":"roteiros/0.Cabeamento/#cloud-computing","text":"O kit cont\u00e9m os seguintes itens: Roteador TP-LINK TL-R470T+ Switch DLink DSG-1210-28 de 28 portas 6 hosts OBS: A senha do roteador est\u00e1 no invent\u00e1rio do seu kit e a do switch est\u00e1 no manual oficial.","title":"Cloud Computing"},{"location":"roteiros/0.Cabeamento/#passo-1-cabo-de-rede-patch-cord","text":"O primeiro deste exerc\u00edcio \u00e9 a confec\u00e7\u00e3o do cabo de rede para a conex\u00e3o de seu computador pessoal ao ambiente do seu kit. O padr\u00e3o que ser\u00e1 utilizado \u00e9 o ANSI/TIA/EIA 568 que foi desenvolvido em 1991 pela EIA (Electronics Industries Alliance) e pela TIA (Telecommunications Industry Association), para normatizar as liga\u00e7\u00f5es el\u00e9tricas/eletr\u00f4nicas de cabos de rede e sua conectoriza\u00e7\u00e3o. Em 1995 uma revis\u00e3o \u00e9 publicada a ANSI/TIA/EIA 568A.","title":"Passo 1 \u2013 Cabo de rede (Patch cord)"},{"location":"roteiros/0.Cabeamento/#lapidando-o-projeto","text":"Agora realize as seguinte modifica\u00e7\u00f5es (se preciso, leia os manuais): Altere o IP do Roteador para 172.16.0.1/20. Altere o IP do Switch para 172.16.0.2/20. Modifique o DHCP server para utilizar a subrede 172.16.0.0/20.","title":"Lapidando o projeto"},{"location":"roteiros/0.Cabeamento/#passo-2-conexao-dos-hosts-e-roteador","text":"De Acordo com a imagem da topologia (primeira imagem), conecte todos os cabos de rede presentes em seu kit no switch, hosts e roteador; Utilize o cabo que voc\u00ea montou para interligar o seu notebook com o kit (conecte ele no switch);","title":"Passo 2 \u2013 conex\u00e3o dos hosts e roteador"},{"location":"roteiros/1.Bare_metal/","text":"Bare Metal \u00b6 Objetivos: \u00b6 Entender os conceitos b\u00e1sicos sobre uma plataforma de gerenciamento de hardware. Introduzir conceitos b\u00e1sicos sobre redes de computadores. Pr\u00e9-requisitos: Realizar a leitura sobre o MaaS. [ https://maas.io/ ]. Realizar a leitura sobre redes de computadores. [Tanenbaum - se\u00e7\u00f5es 1.4, 4.0 e 5.6] Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 2 partes principais. Criando a Infraestrutura (Nuvem Bare-metal) Usando a infraestrutura: Django em Nuvem Bare-Metal Material \u00b6 O grupo ir\u00e1 contar com os seguintes itens no kit: 1 NUC (main) com 10Gb e 1 SSD (120Gb) 1 NUC (server1) com 12Gb e 1 SSD (120Gb) 1 NUC (server2) com 16Gb e 2 SSD (120Gb+120Gb) 3 NUCs (server3, server4 e server5) com 32Gb e 2 SSD (120Gb+120Gb) 1 Switch DLink DSG-1210-28 de 24 portas 1 Roteador TP-Link TL-R470T+ Rede \u00b6 Cada grupo tem a disposi\u00e7\u00e3o um ponto de rede (cabo preto) com sa\u00edda para a rede interna da faculdade. Requisitos de projeto: Sua rede dever\u00e1 estar segregada fisicamente da rede do Insper. Todos os equipamentos estar\u00e3o conectados e possuem acesso \u00e0 Internet. As NUCs server2 , server3 , server4 e server5 estar\u00e3o conectados \u00e0 rede com 2 (duas) interfaces de rede, uma interna e uma externa USB (NIC). A NUC main e a server1 estar\u00e3o conectadas \u00e0 rede com uma interface de rede interna, a padr\u00e3o do hardware. Tarefa: Confirme se as conex\u00f5es de rede feitas anteriormente est\u00e3o corretas. Utilize o diagrama fornecido no roteiro de cabeamento e as informacoes acima. \u00b6 Cada kit possui um IP de entrada, fornecido no invent\u00e1rio do kit. Exercise QUESTOES-1 Qual a topologia da sua rede? Quais outras topologias existem? Quais casos uma rede ter mais de 1 gateway? Quais as consequ\u00eancias de utilizar um DNS externo (Por exemplo: 8.8.8.8) em uma rede privada? O Switch estava originalmente em qual rede? Quantos IPs tem essa rede? Quando acessou o roteador pela primeira vez ele estava na Classe C . Quantas classes existem e qual \u00e9 classe da rede do main? Senhas - IMPORTANTE \u00b6 Todas as senhas do seu sistema devem seguir o seguinte crit\u00e9rio: utilizar a palavra 'cloud' + a letra do kit min\u00fascula. Por exemplo: 'cloudz' \u00e9 a senha padr\u00e3o do kit Z. Usar a mesma senha para todos os servi\u00e7os que exigem cadastramento N\u00c3O alterar nenhuma senha que j\u00e1 esteja pr\u00e9-cadastrada. Exercise QUESTOES-2 Quantos IPs utiliz\u00e1veis est\u00e3o dispon\u00edveis na subrede 10.12.0.0/15? Todos os IP s\u00e3o utiliz\u00e1veis? Qual a diferen\u00e7a entre um IP p\u00fablico e um IP privado? Qual a classe utilizada na rede interna do Insper? E na sua rede? Criando a Infraestrutura (Nuvem Bare-metal) \u00b6 Consulte o diagrama abaixo \"H1 - Diagrama\" Instalando o Ubuntu \u00b6 Procure tutoriais de como instalar o Sistema Operacional Ubuntu server , utilize o pen drive da caixa do seu KIT. Instale o Ubuntu Server 22.04 LTS na NUC main: hostname: main login: cloud senha: (cloud + letra do kit) IP fixo: 172.16.0.3 Instalando o MaaS \u00b6 Verifique se consegue pingar '8.8.8.8'. Se n\u00e3o conseguir, descubra como rotear os pacotes corretamente. Verifique se consegue pingar ' www.google.com '. Se n\u00e3o conseguir, descubra como resolver as urls corretamente. $ sudo apt update && sudo apt upgrade -y V\u00e1 tomar um caf\u00e9. $ sudo snap install maas Tenho certeza que voc\u00ea n\u00e3o leu os pr\u00e9-requisitos, ao inv\u00e9s do caf\u00e9 d\u00e1 uma lida na documentacao pedida no comeco do roteiro $ sudo snap install maas-test-db Acessando sua maquina remotamente. \u00b6 faca o acesso utilizando SSH \u00b6 Dentro da rede Local \u00b6 ssh cloud@172.16.0.3 Configurando o MaaS \u00b6 Inicializando o MaaS: $ sudo maas init region+rack $ sudo maas createadmin use o login cloud use a senha padr\u00e3o da disciplina deixe a chave vazia Gerando um par de chaves para autentica\u00e7\u00e3o. $ ssh-keygen -t rsa use senha vazia dessa vez $ cat ./.ssh/id_rsa.pub copie a chave gerada Agora vamos acessar o Dashboard do MaaS: ele estar\u00e1 dispon\u00edvel em http://172.16.0.3:5240/MAAS . Entenda onde o servi\u00e7o esta rodando e fa\u00e7a o login configure um DNS Forwarder com o DNS do Insper (DNS Externo que o seu roteador enxerga). Importe as imagens do Ubuntu 22.04LTS, Ubuntu 20.04 LTS e Ubuntu 18.04 LTS . Fa\u00e7a o upload da chave copiada no terminal SSH. Em Settings | General: Global Kernel Parameters: net.ifnames=0 (sem espa\u00e7os) Chaveando o DHCP \u00b6 Explore as configura\u00e7\u00f5es do MaaS. Habilite o DHCP na subrede pelo MaaS Controller. ALTERE o Reserved Range para iniciar em 172.16.11.1 e acabar em 172.16.14.255. Deixe o DNS da subnet apontando para o DNS do Insper! Desabilitar o DHCP no roteador. Configurando o Intel AMT \u00b6 Antes de come\u00e7ar a trabalhar nos servidores temos que configurar o IP do Intel AMT para que o MaaS possa se comunicar com estes mesmo que estejam desligados. Siga os pr\u00f3ximos passos para configurar corretamente o IP dos 5 servidores (exceto o MAIN) *server1 = 172.16.15.1 *server2 = 172.16.15.2 *server3 = 172.16.15.3 *server4 = 172.16.15.4 *server5 = 172.16.15.5 Conecte um monitor e um teclado no servidor. Em seguida ligue-o e pressione continuamente as teclas CTRL + P at\u00e9 que a seguinte tela apare\u00e7a: Insira a senha que esta no invent\u00e1rio, dispon\u00edvel na aba de troca de arquivos de seu grupo na p\u00e1gina da disciplina no BlackBoard. Siga os menus selecionados nas imagens para chegar no menu de configura\u00e7\u00e3o de rede do Intel AMT: altere os endere\u00e7os do IPv4, gateway para que correspondam com a sub-rede criada previamente e defina o DNS preferencial como 0.0.0.0 . No final os valores devem ficar parecidos com os da imagem abaixo: reinicie a sua m\u00e1quina e cheque se seu MaaS j\u00e1 come\u00e7ou a configura-las na aba \"Machines\", pode delet\u00e1-las j\u00e1 que voc\u00ea fara isso na pr\u00f3xima etapa. Comissionando servidores \u00b6 Com a folha do invent\u00e1rio do Kit (blackboard), cadastre os hosts (machines) dispon\u00edveis. Altere a op\u00e7\u00e3o Power Type para Intel AMT e preencha segundo a tabela da folha. As NUCs ir\u00e3o comissionar automaticamente, realizando o boot via PXE na rede. hora do Ch\u00e1 , s\u00f3 aliviar o est\u00f4mago um pouco. Ch\u00e1 tamb\u00e9m tem cafe\u00edna. Todos os n\u00f3s devem aparecer com o status Ready . Verificar se as caracter\u00edsticas de hardware (cpu, mem\u00f3ria, SSD e rede) foram detectados com sucesso. Adicionar o Roteador como devices no Dashboard do MaaS Aten\u00e7\u00e3o : verificar se as interfaces de rede se chamam eth0 (placa rede padr\u00e3o com PXE) e eth1 (NIC usb). Verificar o Global Kernel Parameters, apagar o n\u00f3 e reiniciar o processo caso algo esteja errado . Exercise QUESTOES-3 Por que Desabilitar o DHCP do roteador? Descreva o processo PXE Boot? Qual a sua grande vantagem em um datacenter real? Analisando em um aspecto mais amplo, quais outras funcionalidades do MaaS podem ser \u00fateis no gerenciamento de bare metal ? Fazendo Acesso Remoto ao seu KIT \u00b6 De acordo com as aulas te\u00f3ricas, vamos realizar um NAT para permitir o acesso externo \"Rede Wi-fi Insper\" do seu computador ao servidor MAIN . A meta \u00e9 conseguir conectar no servidor principal \"main\" utilizando a porta 22. Libere tambem o acesso ao gerenciamento remoto do seu roteador criando uma regra de gest\u00e3o para a rede 0.0.0.0/0 Se n\u00e3o lembrar das aulas te\u00f3ricas, pesquise por como fazer NAT no Roteador do seu KIT. LINK-documentacao Usando a infraestrutura: \u00b6 Django em Nuvem Bare-Metal \u00b6 Primeiro Deploy \u00b6 Vamos realizar um deploy manual de uma aplica\u00e7\u00e3o simples em Django em nossa nuvem MaaS. Antes de come\u00e7ar, realize um pequeno ajuste no DNS server: Dentro da aba Subnets, clicar na subnet 172.16.0.0/20 e editar a Subnet summary colocando o DNS do Insper - 172.20.129.131 Primeira parte: Banco de Dados \u00b6 Postgres \u00e9 um servidor de banco de dados vers\u00e1til e de f\u00e1cil manejo. Muito usado em projetos Opensource. Acesse o Dashboard do MaaS e realize o deploy do Ubuntu 22.04 no server1. Acesse o terminal do server1 via SSH: $ sudo apt update $ sudo apt install postgresql postgresql-contrib -y Ainda no terminal do server1, crie agora um usu\u00e1rio para a aplica\u00e7\u00e3o: $ sudo su - postgres $ createuser -s cloud -W Usar a senha: cloud Crie um database para a aplica\u00e7\u00e3o: $ createdb -O cloud tasks Exponha o servi\u00e7o para acesso: $ nano /etc/postgresql/12/main/postgresql.conf Remova o coment\u00e1rio e substitua a string da linha para aceitar conex\u00f5es remotas: listen_addresses = '*' $ nano /etc/postgresql/12/main/pg_hba.conf Adicione a linha que libera qualquer m\u00e1quina dentro da subnet do kit: host all all 172.16.0.0/20 trust Saia do usu\u00e1rio postgres Libere o firewall: $ sudo ufw allow 5432/tcp Reinicie o servi\u00e7o: $ sudo systemctl restart postgresql Ser\u00e1 que \u00e9 poss\u00edvel automatizar esse processo Parte II: Aplica\u00e7\u00e3o Django \u00b6 De volta ao maas, vamos subir uma aplica\u00e7\u00e3o ORM Django pr\u00e9 produzida. No lugar de [login], utilize o usu\u00e1rio criado para administrar o MaaS. Pe\u00e7a uma m\u00e1quina direto do cli no terminal agora: $ maas login [login] http://172.16.0.3:5240/MAAS/ Buscar o token no dashboard dentro das configura\u00e7\u00f5es do usu\u00e1rio. Solicite a reserva da m\u00e1quina para o MaaS: $ maas [login] machines allocate name=server2 Anote o campo system_id do json resultante. Realize o deploy via linha de comando, usando o cli: $ maas [login] machine deploy [system_id] Caf\u00e9 ... Aguarde a m\u00e1quina finalizar e entre via ssh nela. No SSH do server2: $ git clone https://github.com/raulikeda/tasks.git Entre no diretorio tasks. $ ./install.sh reboot e aguarde Teste acessando o servi\u00e7o na porta 8080 no terminal do maas: $ wget http://[IP server2]:8080/admin/ Para acessar o servi\u00e7o no seu browser seria necess\u00e1rio fazer um NAT no roteador. Por\u00e9m podemos considerar esse servi\u00e7o como sendo tempor\u00e1rio e podemos usar uma outra forma de expor o servi\u00e7o para fora do kit usando SSH tunnel: Desconecte do SSH do maas Reconecte novamente usando: $ ssh cloud@10.103.0.X -L 8001:[IP server2]:8080 O comando acima ir\u00e1 criar um tunel do servi\u00e7o do server2 na porta 8080 para o seu localhost na porta 8001 usando a conex\u00e3o SSH. Note que \u00e9 importante que a porta 8001 n\u00e3o esteja sendo usada no seu computado. Acesse ent\u00e3o o endere\u00e7o no browser: http://localhost:8001/admin/ Login Django: cloud Senha Django: cloud Tome um tempo olhando o conte\u00fado do arquivo install.sh. Ele automatiza as tarefas de instala\u00e7\u00e3o usando shell script. Note que a utiliza\u00e7\u00e3o do maas-cli no terminal substitui a utiliza\u00e7\u00e3o do dashboard. Tome um tempo explorando: $ maas [login] help commands Caso tenha interesse na aplica\u00e7\u00e3o django: https://docs.djangoproject.com/pt-br/3.1/intro/tutorial01/ Exercise CheckPoint-1 De um print das Telas abaixo: 1. Do Dashboard do **MAAS** com as m\u00e1quinas. 1. Da aba images, com as imagens sincronizadas. 1. Da Aba de cada maquina(5x) mostrando os testes de hardware e commissioning com Status \"OK\" Finalizando \u00b6 Exercise QUESTOES-4 O que \u00e9 e como funciona o NAT? O que deveria ser feito para voc\u00ea conseguir acessar o Maas da sua casa sem VPN? O que significa LTS? Por que isso importa para uma empresa? O que \u00e9 IPv6? Qual a import\u00e2ncia da migra\u00e7\u00e3o? A literatura preconiza que o Modelo de Rede Internet possui 4 camadas, quais s\u00e3o elas e quais camadas foram envolvidas nesse cap\u00edtulo? A literatura mais antiga discorre sobre o Modelo de Rede OSI de 7 camadas. Explique a diferen\u00e7a entre os dois modelos. O que \u00e9 e para que serve um gerenciador de Bare Metal? O que \u00e9 um MAC address? O que \u00e9 um IP address? Como ele difere do MAC address? O que \u00e9 CIDR? Qual o papel da subrede? O que s\u00e3o DHCP, DNS e gateway? Conclus\u00e3o: SOMENTE PARA PENSAR \u00b6 Descreva como o MaaS poderia ser utilizado em um datacenter real (com muitos servidores) e como seria um processo alternativo sem essa ferramenta. Ainda, \u00e9 poss\u00edvel e *SIMPLES* realizar a implanta\u00e7\u00e3o de uma aplica\u00e7\u00e3o usando o MaaS?","title":"Roteiro 1 - MAAS"},{"location":"roteiros/1.Bare_metal/#bare-metal","text":"","title":"Bare Metal"},{"location":"roteiros/1.Bare_metal/#objetivos","text":"Entender os conceitos b\u00e1sicos sobre uma plataforma de gerenciamento de hardware. Introduzir conceitos b\u00e1sicos sobre redes de computadores. Pr\u00e9-requisitos: Realizar a leitura sobre o MaaS. [ https://maas.io/ ]. Realizar a leitura sobre redes de computadores. [Tanenbaum - se\u00e7\u00f5es 1.4, 4.0 e 5.6] Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 2 partes principais. Criando a Infraestrutura (Nuvem Bare-metal) Usando a infraestrutura: Django em Nuvem Bare-Metal","title":"Objetivos:"},{"location":"roteiros/1.Bare_metal/#material","text":"O grupo ir\u00e1 contar com os seguintes itens no kit: 1 NUC (main) com 10Gb e 1 SSD (120Gb) 1 NUC (server1) com 12Gb e 1 SSD (120Gb) 1 NUC (server2) com 16Gb e 2 SSD (120Gb+120Gb) 3 NUCs (server3, server4 e server5) com 32Gb e 2 SSD (120Gb+120Gb) 1 Switch DLink DSG-1210-28 de 24 portas 1 Roteador TP-Link TL-R470T+","title":"Material"},{"location":"roteiros/1.Bare_metal/#rede","text":"Cada grupo tem a disposi\u00e7\u00e3o um ponto de rede (cabo preto) com sa\u00edda para a rede interna da faculdade. Requisitos de projeto: Sua rede dever\u00e1 estar segregada fisicamente da rede do Insper. Todos os equipamentos estar\u00e3o conectados e possuem acesso \u00e0 Internet. As NUCs server2 , server3 , server4 e server5 estar\u00e3o conectados \u00e0 rede com 2 (duas) interfaces de rede, uma interna e uma externa USB (NIC). A NUC main e a server1 estar\u00e3o conectadas \u00e0 rede com uma interface de rede interna, a padr\u00e3o do hardware.","title":"Rede"},{"location":"roteiros/1.Bare_metal/#tarefa-confirme-se-as-conexoes-de-rede-feitas-anteriormente-estao-corretas-utilize-o-diagrama-fornecido-no-roteiro-de-cabeamento-e-as-informacoes-acima","text":"Cada kit possui um IP de entrada, fornecido no invent\u00e1rio do kit. Exercise QUESTOES-1 Qual a topologia da sua rede? Quais outras topologias existem? Quais casos uma rede ter mais de 1 gateway? Quais as consequ\u00eancias de utilizar um DNS externo (Por exemplo: 8.8.8.8) em uma rede privada? O Switch estava originalmente em qual rede? Quantos IPs tem essa rede? Quando acessou o roteador pela primeira vez ele estava na Classe C . Quantas classes existem e qual \u00e9 classe da rede do main?","title":"Tarefa: Confirme se as conex\u00f5es de rede feitas anteriormente est\u00e3o corretas. Utilize o diagrama fornecido no roteiro de cabeamento e as informacoes acima."},{"location":"roteiros/1.Bare_metal/#senhas-importante","text":"Todas as senhas do seu sistema devem seguir o seguinte crit\u00e9rio: utilizar a palavra 'cloud' + a letra do kit min\u00fascula. Por exemplo: 'cloudz' \u00e9 a senha padr\u00e3o do kit Z. Usar a mesma senha para todos os servi\u00e7os que exigem cadastramento N\u00c3O alterar nenhuma senha que j\u00e1 esteja pr\u00e9-cadastrada. Exercise QUESTOES-2 Quantos IPs utiliz\u00e1veis est\u00e3o dispon\u00edveis na subrede 10.12.0.0/15? Todos os IP s\u00e3o utiliz\u00e1veis? Qual a diferen\u00e7a entre um IP p\u00fablico e um IP privado? Qual a classe utilizada na rede interna do Insper? E na sua rede?","title":"Senhas - IMPORTANTE"},{"location":"roteiros/1.Bare_metal/#criando-a-infraestrutura-nuvem-bare-metal","text":"Consulte o diagrama abaixo \"H1 - Diagrama\"","title":"Criando a Infraestrutura (Nuvem Bare-metal)"},{"location":"roteiros/1.Bare_metal/#instalando-o-ubuntu","text":"Procure tutoriais de como instalar o Sistema Operacional Ubuntu server , utilize o pen drive da caixa do seu KIT. Instale o Ubuntu Server 22.04 LTS na NUC main: hostname: main login: cloud senha: (cloud + letra do kit) IP fixo: 172.16.0.3","title":"Instalando o Ubuntu"},{"location":"roteiros/1.Bare_metal/#instalando-o-maas","text":"Verifique se consegue pingar '8.8.8.8'. Se n\u00e3o conseguir, descubra como rotear os pacotes corretamente. Verifique se consegue pingar ' www.google.com '. Se n\u00e3o conseguir, descubra como resolver as urls corretamente. $ sudo apt update && sudo apt upgrade -y V\u00e1 tomar um caf\u00e9. $ sudo snap install maas Tenho certeza que voc\u00ea n\u00e3o leu os pr\u00e9-requisitos, ao inv\u00e9s do caf\u00e9 d\u00e1 uma lida na documentacao pedida no comeco do roteiro $ sudo snap install maas-test-db","title":"Instalando o MaaS"},{"location":"roteiros/1.Bare_metal/#acessando-sua-maquina-remotamente","text":"","title":"Acessando sua maquina remotamente."},{"location":"roteiros/1.Bare_metal/#faca-o-acesso-utilizando-ssh","text":"","title":"faca o acesso utilizando SSH"},{"location":"roteiros/1.Bare_metal/#dentro-da-rede-local","text":"ssh cloud@172.16.0.3","title":"Dentro da rede Local"},{"location":"roteiros/1.Bare_metal/#configurando-o-maas","text":"Inicializando o MaaS: $ sudo maas init region+rack $ sudo maas createadmin use o login cloud use a senha padr\u00e3o da disciplina deixe a chave vazia Gerando um par de chaves para autentica\u00e7\u00e3o. $ ssh-keygen -t rsa use senha vazia dessa vez $ cat ./.ssh/id_rsa.pub copie a chave gerada Agora vamos acessar o Dashboard do MaaS: ele estar\u00e1 dispon\u00edvel em http://172.16.0.3:5240/MAAS . Entenda onde o servi\u00e7o esta rodando e fa\u00e7a o login configure um DNS Forwarder com o DNS do Insper (DNS Externo que o seu roteador enxerga). Importe as imagens do Ubuntu 22.04LTS, Ubuntu 20.04 LTS e Ubuntu 18.04 LTS . Fa\u00e7a o upload da chave copiada no terminal SSH. Em Settings | General: Global Kernel Parameters: net.ifnames=0 (sem espa\u00e7os)","title":"Configurando o MaaS"},{"location":"roteiros/1.Bare_metal/#chaveando-o-dhcp","text":"Explore as configura\u00e7\u00f5es do MaaS. Habilite o DHCP na subrede pelo MaaS Controller. ALTERE o Reserved Range para iniciar em 172.16.11.1 e acabar em 172.16.14.255. Deixe o DNS da subnet apontando para o DNS do Insper! Desabilitar o DHCP no roteador.","title":"Chaveando o DHCP"},{"location":"roteiros/1.Bare_metal/#configurando-o-intel-amt","text":"Antes de come\u00e7ar a trabalhar nos servidores temos que configurar o IP do Intel AMT para que o MaaS possa se comunicar com estes mesmo que estejam desligados. Siga os pr\u00f3ximos passos para configurar corretamente o IP dos 5 servidores (exceto o MAIN) *server1 = 172.16.15.1 *server2 = 172.16.15.2 *server3 = 172.16.15.3 *server4 = 172.16.15.4 *server5 = 172.16.15.5 Conecte um monitor e um teclado no servidor. Em seguida ligue-o e pressione continuamente as teclas CTRL + P at\u00e9 que a seguinte tela apare\u00e7a: Insira a senha que esta no invent\u00e1rio, dispon\u00edvel na aba de troca de arquivos de seu grupo na p\u00e1gina da disciplina no BlackBoard. Siga os menus selecionados nas imagens para chegar no menu de configura\u00e7\u00e3o de rede do Intel AMT: altere os endere\u00e7os do IPv4, gateway para que correspondam com a sub-rede criada previamente e defina o DNS preferencial como 0.0.0.0 . No final os valores devem ficar parecidos com os da imagem abaixo: reinicie a sua m\u00e1quina e cheque se seu MaaS j\u00e1 come\u00e7ou a configura-las na aba \"Machines\", pode delet\u00e1-las j\u00e1 que voc\u00ea fara isso na pr\u00f3xima etapa.","title":"Configurando o Intel AMT"},{"location":"roteiros/1.Bare_metal/#comissionando-servidores","text":"Com a folha do invent\u00e1rio do Kit (blackboard), cadastre os hosts (machines) dispon\u00edveis. Altere a op\u00e7\u00e3o Power Type para Intel AMT e preencha segundo a tabela da folha. As NUCs ir\u00e3o comissionar automaticamente, realizando o boot via PXE na rede. hora do Ch\u00e1 , s\u00f3 aliviar o est\u00f4mago um pouco. Ch\u00e1 tamb\u00e9m tem cafe\u00edna. Todos os n\u00f3s devem aparecer com o status Ready . Verificar se as caracter\u00edsticas de hardware (cpu, mem\u00f3ria, SSD e rede) foram detectados com sucesso. Adicionar o Roteador como devices no Dashboard do MaaS Aten\u00e7\u00e3o : verificar se as interfaces de rede se chamam eth0 (placa rede padr\u00e3o com PXE) e eth1 (NIC usb). Verificar o Global Kernel Parameters, apagar o n\u00f3 e reiniciar o processo caso algo esteja errado . Exercise QUESTOES-3 Por que Desabilitar o DHCP do roteador? Descreva o processo PXE Boot? Qual a sua grande vantagem em um datacenter real? Analisando em um aspecto mais amplo, quais outras funcionalidades do MaaS podem ser \u00fateis no gerenciamento de bare metal ?","title":"Comissionando servidores"},{"location":"roteiros/1.Bare_metal/#fazendo-acesso-remoto-ao-seu-kit","text":"De acordo com as aulas te\u00f3ricas, vamos realizar um NAT para permitir o acesso externo \"Rede Wi-fi Insper\" do seu computador ao servidor MAIN . A meta \u00e9 conseguir conectar no servidor principal \"main\" utilizando a porta 22. Libere tambem o acesso ao gerenciamento remoto do seu roteador criando uma regra de gest\u00e3o para a rede 0.0.0.0/0 Se n\u00e3o lembrar das aulas te\u00f3ricas, pesquise por como fazer NAT no Roteador do seu KIT. LINK-documentacao","title":"Fazendo Acesso Remoto ao seu KIT"},{"location":"roteiros/1.Bare_metal/#usando-a-infraestrutura","text":"","title":"Usando a infraestrutura:"},{"location":"roteiros/1.Bare_metal/#django-em-nuvem-bare-metal","text":"","title":"Django em Nuvem Bare-Metal"},{"location":"roteiros/1.Bare_metal/#primeiro-deploy","text":"Vamos realizar um deploy manual de uma aplica\u00e7\u00e3o simples em Django em nossa nuvem MaaS. Antes de come\u00e7ar, realize um pequeno ajuste no DNS server: Dentro da aba Subnets, clicar na subnet 172.16.0.0/20 e editar a Subnet summary colocando o DNS do Insper - 172.20.129.131","title":"Primeiro Deploy"},{"location":"roteiros/1.Bare_metal/#primeira-parte-banco-de-dados","text":"Postgres \u00e9 um servidor de banco de dados vers\u00e1til e de f\u00e1cil manejo. Muito usado em projetos Opensource. Acesse o Dashboard do MaaS e realize o deploy do Ubuntu 22.04 no server1. Acesse o terminal do server1 via SSH: $ sudo apt update $ sudo apt install postgresql postgresql-contrib -y Ainda no terminal do server1, crie agora um usu\u00e1rio para a aplica\u00e7\u00e3o: $ sudo su - postgres $ createuser -s cloud -W Usar a senha: cloud Crie um database para a aplica\u00e7\u00e3o: $ createdb -O cloud tasks Exponha o servi\u00e7o para acesso: $ nano /etc/postgresql/12/main/postgresql.conf Remova o coment\u00e1rio e substitua a string da linha para aceitar conex\u00f5es remotas: listen_addresses = '*' $ nano /etc/postgresql/12/main/pg_hba.conf Adicione a linha que libera qualquer m\u00e1quina dentro da subnet do kit: host all all 172.16.0.0/20 trust Saia do usu\u00e1rio postgres Libere o firewall: $ sudo ufw allow 5432/tcp Reinicie o servi\u00e7o: $ sudo systemctl restart postgresql Ser\u00e1 que \u00e9 poss\u00edvel automatizar esse processo","title":"Primeira parte: Banco de Dados"},{"location":"roteiros/1.Bare_metal/#parte-ii-aplicacao-django","text":"De volta ao maas, vamos subir uma aplica\u00e7\u00e3o ORM Django pr\u00e9 produzida. No lugar de [login], utilize o usu\u00e1rio criado para administrar o MaaS. Pe\u00e7a uma m\u00e1quina direto do cli no terminal agora: $ maas login [login] http://172.16.0.3:5240/MAAS/ Buscar o token no dashboard dentro das configura\u00e7\u00f5es do usu\u00e1rio. Solicite a reserva da m\u00e1quina para o MaaS: $ maas [login] machines allocate name=server2 Anote o campo system_id do json resultante. Realize o deploy via linha de comando, usando o cli: $ maas [login] machine deploy [system_id] Caf\u00e9 ... Aguarde a m\u00e1quina finalizar e entre via ssh nela. No SSH do server2: $ git clone https://github.com/raulikeda/tasks.git Entre no diretorio tasks. $ ./install.sh reboot e aguarde Teste acessando o servi\u00e7o na porta 8080 no terminal do maas: $ wget http://[IP server2]:8080/admin/ Para acessar o servi\u00e7o no seu browser seria necess\u00e1rio fazer um NAT no roteador. Por\u00e9m podemos considerar esse servi\u00e7o como sendo tempor\u00e1rio e podemos usar uma outra forma de expor o servi\u00e7o para fora do kit usando SSH tunnel: Desconecte do SSH do maas Reconecte novamente usando: $ ssh cloud@10.103.0.X -L 8001:[IP server2]:8080 O comando acima ir\u00e1 criar um tunel do servi\u00e7o do server2 na porta 8080 para o seu localhost na porta 8001 usando a conex\u00e3o SSH. Note que \u00e9 importante que a porta 8001 n\u00e3o esteja sendo usada no seu computado. Acesse ent\u00e3o o endere\u00e7o no browser: http://localhost:8001/admin/ Login Django: cloud Senha Django: cloud Tome um tempo olhando o conte\u00fado do arquivo install.sh. Ele automatiza as tarefas de instala\u00e7\u00e3o usando shell script. Note que a utiliza\u00e7\u00e3o do maas-cli no terminal substitui a utiliza\u00e7\u00e3o do dashboard. Tome um tempo explorando: $ maas [login] help commands Caso tenha interesse na aplica\u00e7\u00e3o django: https://docs.djangoproject.com/pt-br/3.1/intro/tutorial01/ Exercise CheckPoint-1 De um print das Telas abaixo: 1. Do Dashboard do **MAAS** com as m\u00e1quinas. 1. Da aba images, com as imagens sincronizadas. 1. Da Aba de cada maquina(5x) mostrando os testes de hardware e commissioning com Status \"OK\"","title":"Parte II: Aplica\u00e7\u00e3o Django"},{"location":"roteiros/1.Bare_metal/#finalizando","text":"Exercise QUESTOES-4 O que \u00e9 e como funciona o NAT? O que deveria ser feito para voc\u00ea conseguir acessar o Maas da sua casa sem VPN? O que significa LTS? Por que isso importa para uma empresa? O que \u00e9 IPv6? Qual a import\u00e2ncia da migra\u00e7\u00e3o? A literatura preconiza que o Modelo de Rede Internet possui 4 camadas, quais s\u00e3o elas e quais camadas foram envolvidas nesse cap\u00edtulo? A literatura mais antiga discorre sobre o Modelo de Rede OSI de 7 camadas. Explique a diferen\u00e7a entre os dois modelos. O que \u00e9 e para que serve um gerenciador de Bare Metal? O que \u00e9 um MAC address? O que \u00e9 um IP address? Como ele difere do MAC address? O que \u00e9 CIDR? Qual o papel da subrede? O que s\u00e3o DHCP, DNS e gateway?","title":"Finalizando"},{"location":"roteiros/1.Bare_metal/#conclusao-somente-para-pensar","text":"Descreva como o MaaS poderia ser utilizado em um datacenter real (com muitos servidores) e como seria um processo alternativo sem essa ferramenta. Ainda, \u00e9 poss\u00edvel e *SIMPLES* realizar a implanta\u00e7\u00e3o de uma aplica\u00e7\u00e3o usando o MaaS?","title":"Conclus\u00e3o: SOMENTE PARA PENSAR"},{"location":"roteiros/2.Deployment/","text":"Deployment Orchestration \u00b6 Objetivos: Entender os conceitos b\u00e1sicos sobre uma plataforma de gerenciamento de aplica\u00e7\u00f5es distribu\u00eddas. Entender os conceitos b\u00e1sicos de comunica\u00e7\u00e3o entre aplica\u00e7\u00f5es e servi\u00e7os. Pr\u00e9-requisitos: Terminar o cap\u00edtulo anterior (Bare metal) Realizar a leitura sobre o Juju. [ https://jaas.ai/how-it-works ]. Realizar a leitura sobre redes de computadores. [Kavis - Cap. 6. Tanenbaum & Steen - Cap. 1 e Cap. 12] Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 3 partes principais. Entender a automac\u00e3o do Deploy - Utilizando ferramenta Ansible no Bare-metal Criando Infraestrutura para deploy com Juju (Deployment Orchestration) Utilizando a infraestrutura Bare Metal com o Juju - exemplo de deploy Wordpress Utilizando o Ansible - deploy automatizado de aplica\u00e7\u00e3o \u00b6 Vamos realizar a instala\u00e7\u00e3o da mesma aplica\u00e7\u00e3o de forma autom\u00e1tica, por exemplo podemos efetuar a instala\u00e7\u00e3o em diversos servers . Vamos ent\u00e3o utilizar novos conceitos e ferramentas: Exemplo - gerenciador de deploy Ansible ( https://www.ansible.com/ ) Caracter\u00edsticas: Idempotente no sentido de conseguir repetir todos os procedimentos sem afetar os estados intermedi\u00e1rios da insta\u00e7\u00e3o. F\u00e1cil de se lidar com um pool de m\u00e1quinas simultaneamente. Consegue realizar o provisionamento autom\u00e1tico de VMs e Containers (mas n\u00e3o metal). Tarefas: Pe\u00e7a o deploy no server3 para o maas via cli Agora no SSH do main: $ sudo apt install ansible $ wget https://raw.githubusercontent.com/raulikeda/tasks/master/tasks-install-playbook.yaml $ ansible-playbook tasks-install-playbook.yaml --extra-vars server=[IP server3] Exercise Check-point1: Teste o acesso criando mais um tunel na string de conex\u00e3o, caso esteja tudo certo, fa\u00e7a a tarefa abaixo De um print da tela do Dashboard do MAAS com as 3 Maquinas e seus respectivos IPs. Mantendo o tunel aberto, rode o comando WGET para acesso a aplicacao Django no server 2 e cole a sa\u00edda do comando. Mantendo o tunel aberto, rode o comando WGET para acesso a aplicacao Django no server 3 e cole a sa\u00edda do comando. Agora temos 2 aplica\u00e7\u00f5es django (server2 e server3) compartilhando o mesmo banco de dados (server1). Os motivos para fazermos isso s\u00e3o dois: Alta disponibilidade: se um node cair o outro est\u00e1 no ar. Load Balancing: podemos dividir a carga de acesso entre os n\u00f3s. Contudo seria ideal que tiv\u00e9ssemos apenas um ponto de entrada, ao inv\u00e9s de escolher manualmente ou chavear os IPs dos n\u00f3s. Balancamento de carga usando Proxy Reverso \u00b6 Para montar o ponto \u00fanico de entrada, utilizaremos uma aplica\u00e7\u00e3o de proxy reverso como load balancer. Voc\u00eas conseguem instalar o NGINX no n\u00f3 server4 como loadbalancer... Tutorial para fazer manual: https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-load-balancing Exercise Check-point2: Teste o acesso criando mais um tunel na string de conex\u00e3o, caso esteja tudo certo, fa\u00e7a a tarefa abaixo. De um print da tela do Dashboard do MAAS com as 4 Maquinas e seus respectivos IPs. Mantendo o tunel aberto, rode o comando WGET para acesso a aplicacao Django, porem agora o comando deve apontar para o load-balancer, cole a sa\u00edda do comando aqui. Exercise QUESTOES-1 Escreva aqui o seu roteiro de implanta\u00e7\u00e3o do NGINX. Explique o conceito por traz do Reverse Proxy. Voc\u00eas j\u00e1 fizeram algo parecido? Na instala\u00e7\u00e3o toda, voc\u00ea alocou 4 m\u00e1quinas f\u00edsicas, duas para o Django, uma para o Postgres e uma para o NGINX. Considerando que \u00e9 um Hardware pr\u00f3prio, ao contr\u00e1rio do modelo \"Public Cloud\", esse modelo de arquitetura \u00e9 bom ou ruim em termos de custos? Agora que voc\u00ea utilizou um gerenciador de deploy, vamos retormar a cria\u00e7\u00e3o de nuvem utilizando este novo conceito. Remova o deploy (release) de todos n\u00f3s no kit. Criando Infraestrutura para deploy com Juju \u00b6 Ansible \u00e9 um gerenciador de deploy que consegue lidar com a instala\u00e7\u00e3o e configura\u00e7\u00e3o de um conjunto de n\u00f3s pr\u00e9 reservados, mas n\u00e3o consegue realizar o provisionamento direto com o MaaS (gerenciador de Bare-metal). Para montar a nossa Cloud Privada, vamos utilizar outro orquestrador de deploy que integra com o MaaS. Antes de continuar, verifique se todas m\u00e1quinas (server1, server2, server3, server4 e server5) est\u00e3o Ready no MAAS. Fa\u00e7a o release das m\u00e1quinas Django e Postgres caso necess\u00e1rio. Acesse o main via SSH e instale o Juju $ sudo snap install juju --classic Verifique se o Juju enxerga o MaaS como um provedor de recursos $ juju clouds Caso n\u00e3o possua o MaaS como op\u00e7\u00e3o, deve adicion\u00e1-lo Criar um arquivo de configura\u00e7\u00e3o: maas-juju.yaml (aten\u00e7\u00e3o com a formata\u00e7\u00e3o) clouds: maas: type: maas auth-types: [oauth1] endpoint: http://192.168.0.3:5240/MAAS/ $ juju add-cloud maas maas-juju.yaml $ juju add-credential maas Obs: OAuth \u00e9 o API KEY gerado no MaaS (dentro do menu do usu\u00e1rio) Vamos criar agora o juju controller : $ juju bootstrap --bootstrap-series=jammy maas main --to server1 Para verificar o status do controller utilize: $ juju status Para acessar o Dashboard (via browser): $ juju gui Crie novamente um tunel SSH: $ ssh cloud@[IP Roteador] -L 8080:[IP do Juju GUI]:17070 Acesse do seu browser a url indicada no terminal, adaptando o endere\u00e7o IP. Ao contr\u00e1rio do Ansible, Juju necessita de uma m\u00e1quina exclusiva para controlar todo o deploy. Essa m\u00e1quina \u00e9 alocada automaticamente durante o bootstrap e controlar\u00e1 todo o deploy que faremos no pr\u00f3ximo roteiro. Ainda, assim como voc\u00ea usou o maas-cli na primeira implanta\u00e7\u00e3o, voc\u00ea usou o juju-cli para interagir com o servi\u00e7o. Exercise QUESTOES-2 Qual o S.O. utilizado na m\u00e1quina Juju? Quem o instalou? O Juju requisitou uma m\u00e1quina automaticamente para o MaaS via API. Por quais motivos ter uma API \u00e9 importante para uma aplica\u00e7\u00e3o? Utilizando a infraestrutura Bare Metal com o Juju - deploy Wordpress \u00b6 Vamos utilizar o Juju para fazer o deploy de uma arquitetura para o Wordpress Instale a aplica\u00e7\u00e3o charm para utilizarmos, vamos baixar o charm do Wordpress do reposit\u00f3rio charm-hub. $ sudo snap install charm --channel=2.x/stable --classic Baixe o charm do https://charmhub.io/wordpress usando o comando charm pull . $ charm pull wordpress Tamb\u00e9m vamos utilizar um charm previamente modificado do MYSQL ...Fa\u00e7a o clone do reposit\u00f3rio GIT. $ git clone https://github.com/TiagoDemay/charm-mysql.git Agora \u00e9 s\u00f3 fazer o Deploy com o auxilio do JUJU \u00b6 Fa\u00e7a o deploy do charm charm-mysql , para fazer deploy do charm local, use juju deploy ./pasta Modifique o charm wordpress \u00b6 Dentro do diret\u00f3rio criado, edite o arquivo metadata.yaml : modifique para utilizar apenas Ubuntu Bionic Fa\u00e7a o deploy do charm wordpress alterado localmente , utilize a p\u00e1gina para te auxiliar https://charmhub.io/wordpress , pare antes do capitulo Scaled Down Usage for Personal Use Acompanhe o andamento usando o comando juju status , ap\u00f3s terminado, acesse o Wordpress do seu computador, e verifique o funcionamento do sistema Exercise Checkpoint-3 De um print da tela do Dashboard do MAAS com as Maquinas e seus respectivos IPs. Rode o comando \"juju status\" depois que o Wordpress estiver \"active\" e cole aqui. Entre no Dashboard da aplicacao Wordpress. Para isso acesse a rede interna do KIT, plugando o cabo diretamente no switch. Instale a aplicacao !!!! ANOTE A SENHA e coloque o seu e-mail. De um print da tela do Dashboard do Wordpress que foi implantado. Limpeza de ambiente \u00b6 Limpe o deploy do Juju usando o command: juju destroy-controller main Exercise QUESTOES-3 Juju \u00e9 uma aplica\u00e7\u00e3o distribu\u00edda? E o MaaS? O que \u00e9 REST? Quais outras alternativas? O que \u00e9 SOAP? Quais outras alternativas? O que \u00e9 e o que faz um Deployment Orchestrator ? Cite outras aplica\u00e7\u00f5es que n\u00e3o usamos nesse roteiro. Como \u00e9 o o processo de intera\u00e7\u00e3o entre um servidor API REST e uma client application? Defina Aplica\u00e7\u00e3o Distribu\u00edda, Alta Disponibilidade e Load Balancing ? Conclus\u00e3o: SOMENTE PARA PENSAR \u00b6 O Ansible utilizou indiretamente o MaaS como provedor de recursos f\u00edsicos. O MaaS por sua vez forneceu o que havia dispon\u00edvel no rack. Voc\u00ea acha que seria necess\u00e1ria uma m\u00e1quina de 32Gb para rodar um Webserver ou um Load Balancer ? Extrapole a resposta para um Datacenter real, onde as m\u00e1quinas possuem configura\u00e7\u00f5es muito superiores. Como resolver esse problema?","title":"Roteiro 2 - JUJU"},{"location":"roteiros/2.Deployment/#deployment-orchestration","text":"Objetivos: Entender os conceitos b\u00e1sicos sobre uma plataforma de gerenciamento de aplica\u00e7\u00f5es distribu\u00eddas. Entender os conceitos b\u00e1sicos de comunica\u00e7\u00e3o entre aplica\u00e7\u00f5es e servi\u00e7os. Pr\u00e9-requisitos: Terminar o cap\u00edtulo anterior (Bare metal) Realizar a leitura sobre o Juju. [ https://jaas.ai/how-it-works ]. Realizar a leitura sobre redes de computadores. [Kavis - Cap. 6. Tanenbaum & Steen - Cap. 1 e Cap. 12] Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 3 partes principais. Entender a automac\u00e3o do Deploy - Utilizando ferramenta Ansible no Bare-metal Criando Infraestrutura para deploy com Juju (Deployment Orchestration) Utilizando a infraestrutura Bare Metal com o Juju - exemplo de deploy Wordpress","title":"Deployment Orchestration"},{"location":"roteiros/2.Deployment/#utilizando-o-ansible-deploy-automatizado-de-aplicacao","text":"Vamos realizar a instala\u00e7\u00e3o da mesma aplica\u00e7\u00e3o de forma autom\u00e1tica, por exemplo podemos efetuar a instala\u00e7\u00e3o em diversos servers . Vamos ent\u00e3o utilizar novos conceitos e ferramentas: Exemplo - gerenciador de deploy Ansible ( https://www.ansible.com/ ) Caracter\u00edsticas: Idempotente no sentido de conseguir repetir todos os procedimentos sem afetar os estados intermedi\u00e1rios da insta\u00e7\u00e3o. F\u00e1cil de se lidar com um pool de m\u00e1quinas simultaneamente. Consegue realizar o provisionamento autom\u00e1tico de VMs e Containers (mas n\u00e3o metal). Tarefas: Pe\u00e7a o deploy no server3 para o maas via cli Agora no SSH do main: $ sudo apt install ansible $ wget https://raw.githubusercontent.com/raulikeda/tasks/master/tasks-install-playbook.yaml $ ansible-playbook tasks-install-playbook.yaml --extra-vars server=[IP server3] Exercise Check-point1: Teste o acesso criando mais um tunel na string de conex\u00e3o, caso esteja tudo certo, fa\u00e7a a tarefa abaixo De um print da tela do Dashboard do MAAS com as 3 Maquinas e seus respectivos IPs. Mantendo o tunel aberto, rode o comando WGET para acesso a aplicacao Django no server 2 e cole a sa\u00edda do comando. Mantendo o tunel aberto, rode o comando WGET para acesso a aplicacao Django no server 3 e cole a sa\u00edda do comando. Agora temos 2 aplica\u00e7\u00f5es django (server2 e server3) compartilhando o mesmo banco de dados (server1). Os motivos para fazermos isso s\u00e3o dois: Alta disponibilidade: se um node cair o outro est\u00e1 no ar. Load Balancing: podemos dividir a carga de acesso entre os n\u00f3s. Contudo seria ideal que tiv\u00e9ssemos apenas um ponto de entrada, ao inv\u00e9s de escolher manualmente ou chavear os IPs dos n\u00f3s.","title":"Utilizando o Ansible - deploy automatizado de aplica\u00e7\u00e3o"},{"location":"roteiros/2.Deployment/#balancamento-de-carga-usando-proxy-reverso","text":"Para montar o ponto \u00fanico de entrada, utilizaremos uma aplica\u00e7\u00e3o de proxy reverso como load balancer. Voc\u00eas conseguem instalar o NGINX no n\u00f3 server4 como loadbalancer... Tutorial para fazer manual: https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-load-balancing Exercise Check-point2: Teste o acesso criando mais um tunel na string de conex\u00e3o, caso esteja tudo certo, fa\u00e7a a tarefa abaixo. De um print da tela do Dashboard do MAAS com as 4 Maquinas e seus respectivos IPs. Mantendo o tunel aberto, rode o comando WGET para acesso a aplicacao Django, porem agora o comando deve apontar para o load-balancer, cole a sa\u00edda do comando aqui. Exercise QUESTOES-1 Escreva aqui o seu roteiro de implanta\u00e7\u00e3o do NGINX. Explique o conceito por traz do Reverse Proxy. Voc\u00eas j\u00e1 fizeram algo parecido? Na instala\u00e7\u00e3o toda, voc\u00ea alocou 4 m\u00e1quinas f\u00edsicas, duas para o Django, uma para o Postgres e uma para o NGINX. Considerando que \u00e9 um Hardware pr\u00f3prio, ao contr\u00e1rio do modelo \"Public Cloud\", esse modelo de arquitetura \u00e9 bom ou ruim em termos de custos? Agora que voc\u00ea utilizou um gerenciador de deploy, vamos retormar a cria\u00e7\u00e3o de nuvem utilizando este novo conceito. Remova o deploy (release) de todos n\u00f3s no kit.","title":"Balancamento de carga usando Proxy Reverso"},{"location":"roteiros/2.Deployment/#criando-infraestrutura-para-deploy-com-juju","text":"Ansible \u00e9 um gerenciador de deploy que consegue lidar com a instala\u00e7\u00e3o e configura\u00e7\u00e3o de um conjunto de n\u00f3s pr\u00e9 reservados, mas n\u00e3o consegue realizar o provisionamento direto com o MaaS (gerenciador de Bare-metal). Para montar a nossa Cloud Privada, vamos utilizar outro orquestrador de deploy que integra com o MaaS. Antes de continuar, verifique se todas m\u00e1quinas (server1, server2, server3, server4 e server5) est\u00e3o Ready no MAAS. Fa\u00e7a o release das m\u00e1quinas Django e Postgres caso necess\u00e1rio. Acesse o main via SSH e instale o Juju $ sudo snap install juju --classic Verifique se o Juju enxerga o MaaS como um provedor de recursos $ juju clouds Caso n\u00e3o possua o MaaS como op\u00e7\u00e3o, deve adicion\u00e1-lo Criar um arquivo de configura\u00e7\u00e3o: maas-juju.yaml (aten\u00e7\u00e3o com a formata\u00e7\u00e3o) clouds: maas: type: maas auth-types: [oauth1] endpoint: http://192.168.0.3:5240/MAAS/ $ juju add-cloud maas maas-juju.yaml $ juju add-credential maas Obs: OAuth \u00e9 o API KEY gerado no MaaS (dentro do menu do usu\u00e1rio) Vamos criar agora o juju controller : $ juju bootstrap --bootstrap-series=jammy maas main --to server1 Para verificar o status do controller utilize: $ juju status Para acessar o Dashboard (via browser): $ juju gui Crie novamente um tunel SSH: $ ssh cloud@[IP Roteador] -L 8080:[IP do Juju GUI]:17070 Acesse do seu browser a url indicada no terminal, adaptando o endere\u00e7o IP. Ao contr\u00e1rio do Ansible, Juju necessita de uma m\u00e1quina exclusiva para controlar todo o deploy. Essa m\u00e1quina \u00e9 alocada automaticamente durante o bootstrap e controlar\u00e1 todo o deploy que faremos no pr\u00f3ximo roteiro. Ainda, assim como voc\u00ea usou o maas-cli na primeira implanta\u00e7\u00e3o, voc\u00ea usou o juju-cli para interagir com o servi\u00e7o. Exercise QUESTOES-2 Qual o S.O. utilizado na m\u00e1quina Juju? Quem o instalou? O Juju requisitou uma m\u00e1quina automaticamente para o MaaS via API. Por quais motivos ter uma API \u00e9 importante para uma aplica\u00e7\u00e3o?","title":"Criando Infraestrutura para deploy com Juju"},{"location":"roteiros/2.Deployment/#utilizando-a-infraestrutura-bare-metal-com-o-juju-deploy-wordpress","text":"Vamos utilizar o Juju para fazer o deploy de uma arquitetura para o Wordpress Instale a aplica\u00e7\u00e3o charm para utilizarmos, vamos baixar o charm do Wordpress do reposit\u00f3rio charm-hub. $ sudo snap install charm --channel=2.x/stable --classic Baixe o charm do https://charmhub.io/wordpress usando o comando charm pull . $ charm pull wordpress Tamb\u00e9m vamos utilizar um charm previamente modificado do MYSQL ...Fa\u00e7a o clone do reposit\u00f3rio GIT. $ git clone https://github.com/TiagoDemay/charm-mysql.git","title":"Utilizando a infraestrutura Bare Metal com o Juju - deploy Wordpress"},{"location":"roteiros/2.Deployment/#agora-e-so-fazer-o-deploy-com-o-auxilio-do-juju","text":"Fa\u00e7a o deploy do charm charm-mysql , para fazer deploy do charm local, use juju deploy ./pasta","title":"Agora \u00e9 s\u00f3 fazer o Deploy com o auxilio do JUJU"},{"location":"roteiros/2.Deployment/#modifique-o-charm-wordpress","text":"Dentro do diret\u00f3rio criado, edite o arquivo metadata.yaml : modifique para utilizar apenas Ubuntu Bionic Fa\u00e7a o deploy do charm wordpress alterado localmente , utilize a p\u00e1gina para te auxiliar https://charmhub.io/wordpress , pare antes do capitulo Scaled Down Usage for Personal Use Acompanhe o andamento usando o comando juju status , ap\u00f3s terminado, acesse o Wordpress do seu computador, e verifique o funcionamento do sistema Exercise Checkpoint-3 De um print da tela do Dashboard do MAAS com as Maquinas e seus respectivos IPs. Rode o comando \"juju status\" depois que o Wordpress estiver \"active\" e cole aqui. Entre no Dashboard da aplicacao Wordpress. Para isso acesse a rede interna do KIT, plugando o cabo diretamente no switch. Instale a aplicacao !!!! ANOTE A SENHA e coloque o seu e-mail. De um print da tela do Dashboard do Wordpress que foi implantado.","title":"Modifique o charm wordpress"},{"location":"roteiros/2.Deployment/#limpeza-de-ambiente","text":"Limpe o deploy do Juju usando o command: juju destroy-controller main Exercise QUESTOES-3 Juju \u00e9 uma aplica\u00e7\u00e3o distribu\u00edda? E o MaaS? O que \u00e9 REST? Quais outras alternativas? O que \u00e9 SOAP? Quais outras alternativas? O que \u00e9 e o que faz um Deployment Orchestrator ? Cite outras aplica\u00e7\u00f5es que n\u00e3o usamos nesse roteiro. Como \u00e9 o o processo de intera\u00e7\u00e3o entre um servidor API REST e uma client application? Defina Aplica\u00e7\u00e3o Distribu\u00edda, Alta Disponibilidade e Load Balancing ?","title":"Limpeza de ambiente"},{"location":"roteiros/2.Deployment/#conclusao-somente-para-pensar","text":"O Ansible utilizou indiretamente o MaaS como provedor de recursos f\u00edsicos. O MaaS por sua vez forneceu o que havia dispon\u00edvel no rack. Voc\u00ea acha que seria necess\u00e1ria uma m\u00e1quina de 32Gb para rodar um Webserver ou um Load Balancer ? Extrapole a resposta para um Datacenter real, onde as m\u00e1quinas possuem configura\u00e7\u00f5es muito superiores. Como resolver esse problema?","title":"Conclus\u00e3o: SOMENTE PARA PENSAR"},{"location":"roteiros/3.Private_Cloud_Stack/","text":"Private cloud \u00b6 Objetivos Entender os conceitos b\u00e1sicos de Private Cloud. Aprofundar conceitos sobre redes virtuais SDN. Pr\u00e9-requisitos: Terminar o cap\u00edtulo anterior (Juju) Realizar a leitura sobre o Openstack. [ https://www.openstack.org/ ]. Realizar a leitura sobre o Openstack. [Jackson et al - Cap. 1 at\u00e9 Cap. 5] Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 2 partes principais. Criando a Infraestrutura (Nuvem VM) - Servidor Virtual Privado (VPS) Uso da Infraestrutura: Django na Nuvem VM criada Criando a Infraestrutura (Nuvem VM) - Servidor Virtual Privado (VPS) \u00b6 Nesse roteiro vamos instalar um conjunto de aplica\u00e7\u00f5es denominado Openstack que vai permitir distribuirmos virtual machines usando os n\u00f3s dispon\u00edveis no kit. At\u00e9 o momento usamos o mass para orquestrar o bare metal e o juju para cuidar do deployment de aplicacoes (exemplo Wordpress). E agora vamos utilizar o Openstack para criar VMs e distribuir os servi\u00e7os em todas as m\u00e1quinas kit com maior eficiencia. Instalando - Openstack Canonical Distro \u00b6 Fa\u00e7a o download do charm Openstack Base no maas: $ charm pull cs:openstack-base Dentro do diret\u00f3rio criado, edite o arquivo bundle.yaml : identifique quantas m\u00e1quinas ser\u00e3o alocadas. verifique cada um dos servi\u00e7os que ser\u00e3o instalados e em quais m\u00e1quinas. sete o nome do adaptador de rede, br-ex:eth1 na vari\u00e1vel data-port . Cuidado para n\u00e3o errar (seguir https://charmhub.io/openstack-base ) variables: openstack-origin: &openstack-origin cloud:focal-yoga data-port: &data-port br-ex:eth1 worker-multiplier: &worker-multiplier 0.25 osd-devices: &osd-devices /dev/sdb /dev/vdb expected-osd-count: &expected-osd-count 3 expected-mon-count: &expected-mon-count 3 Reservar (Allocate) a m\u00e1quina \"server2\" no maas. Instale o bundle customizado: $ juju deploy ./bundle.yaml Hora da leitura na documentacao pedida no comeco do roteiro Warning Provavelmente ocorreu um erro no deploy . ??? Conceito importante: Ao contr\u00e1rio do Ansible, Juju necessita de uma m\u00e1quina exclusiva para controlar todo o deploy. Essa m\u00e1quina \u00e9 alocada automaticamente durante o bootstrap e controlar\u00e1 todo o deploy. Logo voc\u00ea precisa fazer o bootstrap de um novo controlador no server1. Voc\u00eas j\u00e1 sabem o que fazer agora: utilizar o comando abaixo para ficar de olho no status do Juju: $ watch -n 2 -c \"juju status --color\" Enquanto aguarda a insta\u00e7\u00e3o at\u00e9 a indica\u00e7\u00e3o 'certificates' awaiting server certificate data e at\u00e9 que o servi\u00e7o Vault esteja bloqueado. Responda abaixo: Exercise QUESTOES-1 Conforme visto no arquivo de instala\u00e7\u00e3o, os servi\u00e7os s\u00e3o instalados usando LXD nos nodes. O que \u00e9 LXD? Baseado na distribui\u00e7\u00e3o do bundle.yaml e no juju status, fa\u00e7a um desenho de como \u00e9 a sua arquitetura de solu\u00e7\u00e3o: um ret\u00e2ngulo grande para cada m\u00e1quina f\u00edsica. coloque um ret\u00e2ngulo para cada lxd (container) dentro da respectiva m\u00e1quina. dentro de cada ret\u00e2ngulo, escreva o nome do servi\u00e7o. realize a liga\u00e7\u00e3o entre os servi\u00e7os baseando-se nas rela\u00e7\u00f5es. Vault \u00e9 um servidor de secrets . Como ele funciona e para o que ele \u00e9 usado? Abrindo o cofre \u00b6 Para dar prosseguimento, precisamos instalar um certificado v\u00e1lido dentro do Vault, para isso precisamos fazer uma opera\u00e7\u00e3o de unseal : Instalando o cli do Vault e configurando-o: $ sudo snap install vault $ export VAULT_ADDR=\"http://<IP of vault unit>:8200\" Gerando : $ vault operator init -key-shares=5 -key-threshold=3 Voc\u00eas receber\u00e3o 5 Unseal Keys e 1 Initial Root Token . Copie e reserve. Removendo o selo, repita a opera\u00e7\u00e3o com 3 keys diferentes: $ vault operator unseal <Unseal Key> Autorizando o charm (esse passo precisa ser feito em 10 minutos): $ export VAULT_TOKEN=<Initial Root Token> $ vault token create -ttl=10m anote o token gerado pelo comando e use abaixo. $ juju run-action --wait vault/leader authorize-charm token=<token> Finalmente, gerando o certificado: $ juju run-action --wait vault/leader generate-root-ca Espere at\u00e9 TODOS os servicos ficarem com o Status \"active\", exceto o servi\u00e7o ceph-radosgw , que deve estar bloqueado. Para seguir em frente o seu juju status deveria ter a seguinte apar\u00eancia: Configurando o Openstack \u00b6 Chegou a hora de configurar o servi\u00e7o que controla as VMs (Nova), os volumes de disco (Cinder) e a estrutura de rede virtual (Neutron). O primeiro passo \u00e9 carregar as vari\u00e1veis de ambiente e autenticar (Keystone) no sistema. Ainda, montaremos o nosso servidor de imagens (Glance), que utiliza o Object Storage (Ceph) para armazenamento. O sistema ainda conta com um dashboard (Horizon), um cluster de banco de dados (Mysql Inno Cluster) e um servidor de filas (RabbitMQ) como apoio. Usando como base a p\u00e1gina do charm instalado ( https://jaas.ai/openstack-base/ ), LEIA O DOCUMENTO INTEIRO ANTES DE INICIAR OS COMANDOS. \u00b6 Acesse o Horizon ( dashboard ) como administrador \u00b6 Dica O Domain name \u00e9 : admin_domain Exercise CheckPoint-1 De um print das Telas abaixo: Do Dashboard do MAAS com as m\u00e1quinas. Da aba compute overview no OpenStack . Da aba compute instances no OpenStack . Da aba network topology no OpenStack . Prestem muita aten\u00e7\u00e3o nos passos! N\u00e3o copie e cole comandos sem verificar os argumentos. Come\u00e7e a partir da se\u00e7\u00e3o Install the OpenStack clients Instale o client do Openstack no maas via snap. Carregue as credenciais em openrc e verifique os servi\u00e7os: $ openstack service list Fa\u00e7a pequenos ajustes na rede: $ juju config neutron-api enable-ml2-dns=\"true\" $ juju config neutron-api-plugin-ovn dns-servers=\"192.168.0.1\" Importe a imagem do Ubuntu Focal e Bionic. Voc\u00ea precisar\u00e1 procurar a imagem do Bionic. Configure a rede externa. Usar uma faixa de aloca\u00e7\u00e3o entre 192.168.7.0 e 192.168.8.255. Crie a rede interna e o roteador. Usar a subnet 192.169.0.0/24. N\u00e3o use DNS. Analise o comando: $ openstack flavor create --help Crie os flavors (instance type) - SEM ephemeral disk : m1.tiny: 1 vcpu/1Gb RAM/20Gb disk m1.small: 1 vcpus/2Gb RAM/20Gb disk m1.medium: 2 vcpus/4Gb RAM/20Gb disk m1.large: 4 vcpus/8Gb RAM/20Gb disk Importe (upload) um key-pair, usando public key (id_rsa.pub) do pr\u00f3prio MaaS. Acesse o Horizon ( dashboard ) como administrador: Adicione a libera\u00e7\u00e3o do SSH e ALL ICMP no security group default . Verifique se a topologia de rede faz sentido. Ela deve ser semelhante ao projeto da sua rede f\u00edsica, por\u00e9m com mais um n\u00edvel dentro. Essa rede n\u00e3o existe fisicamente, \u00e9 tudo virtual. Dispare uma inst\u00e2ncia m1.tiny com o nome client e sem Novo Volume . Aloque um floating IP para a inst\u00e2ncia. Teste a conex\u00e3o SSH! Em caso de erro, volte e verifique se as etapas anteriores est\u00e3o corretas. Exercise CheckPoint-2 De um print das Telas abaixo: Do Dashboard do MAAS com as m\u00e1quinas. Da aba compute overview no OpenStack . Da aba compute instances no OpenStack . Da aba network topology no OpenStack . Enumere as diferencas encontradas entre os prints das telas no Checkpoint1 e o Checkpoint-2. Explique como cada recurso foi criado. Configurando imagens do Ubuntu para uso (Metadata) \u00b6 Na m\u00e1quina main, vamos adicionar o servi\u00e7o Glance Simplestreams. juju deploy glance-simplestreams-sync --to 0 juju add-relation glance-simplestreams-sync:identity-service keystone:identity-service Execute o comando juju run-action glance-simplestreams-sync/0 sync-images --wait e aguarde a conclus\u00e3o acompanhando via juju status . Escalando os n\u00f3s \u00b6 Vamos adicionar o openstack no cluster como n\u00f3 de computing e block storage . Verfique no Dashboard do MaaS se ainda h\u00e1 uma m\u00e1quina dispon\u00edvel (m\u00e1quina que reservamos/allocated). Fa\u00e7a o release da m\u00e1quina que est\u00e1 ALLOCATED (cuidado para n\u00e3o errar!) Instale o hypervisor, realizando o deploy na m\u00e1quina: $ juju add-unit nova-compute Anote o n\u00famero da m\u00e1quina adicionada no status e instale o block storage: $ juju add-unit --to <machine-id> ceph-osd Exercise QUESTOES-2 Qual a fun\u00e7\u00e3o do Glance? O que o comando abaixo faz? juju run-action glance-simplestreams-sync/0 sync-images --wait Para que serve o Metadata gerada pelo glance? Fa\u00e7a um desenho de como \u00e9 a sua arquitetura de rede, desde a sua conex\u00e3o com o Insper at\u00e9 a inst\u00e2ncia alocada. O que \u00e9 um Hypervisor? Qual o hypervisor do Openstack, da AWS e da Azure? Uso da Infraestrutura: Django na Nuvem VM criada \u00b6 Agora conseguimos corrigir o erro apontado na conclus\u00e3o do H2, levantando a mesma aplica\u00e7\u00e3o django mas sem precisar sacrificar 4 m\u00e1quinas inteiras. Tarefa : Levantar a aplica\u00e7\u00e3o django do Roteiro1 at\u00e9 o Roteiro2 (com Nginx) em cima das maquinas virtuais do Openstack. TOPOLOGIA: Exercise Escreva um relat\u00f3rio dos passos utilizados. Anexe fotos e/ou diagramas contendo: arquitetura de rede do Django dentro do Openstack* ( Dica: use o dashboard do Openstack ), lista de VMs utilizadas com nome e IPs alocados, foto do Dashboard Django conectado na m\u00e1quina Nginx/LB. Exercise QUESTOES-3 Dado que voc\u00eas trabalharam com Nuvem P\u00fablica e com Nuvem Privada, descreva com detalhes como voc\u00ea montaria uma Nuvem H\u00edbrida. Como seria a troca de dados? \u00c9 poss\u00edvel somar todo o hardware dispon\u00edvel e disparar uma inst\u00e2ncia gigante (ex: mais mem\u00f3ria do que dispon\u00edvel na melhor m\u00e1quina)? Discorra sobre as possibilidades. Cite e explique pelo menos 2 circunst\u00e2ncias em que a Private Cloud \u00e9 mais vantajosa que a Public Cloud . Openstack \u00e9 um Sistema Operacional? Descreva seu prop\u00f3sito e cite as principais distribui\u00e7\u00f5es? Quais s\u00e3o os principais componentes dentro do Openstack? Descreva brevemente suas funcionalidades.","title":"Computa\u00e7\u00e3o em Nuvem"},{"location":"roteiros/3.Private_Cloud_Stack/#private-cloud","text":"Objetivos Entender os conceitos b\u00e1sicos de Private Cloud. Aprofundar conceitos sobre redes virtuais SDN. Pr\u00e9-requisitos: Terminar o cap\u00edtulo anterior (Juju) Realizar a leitura sobre o Openstack. [ https://www.openstack.org/ ]. Realizar a leitura sobre o Openstack. [Jackson et al - Cap. 1 at\u00e9 Cap. 5] Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 2 partes principais. Criando a Infraestrutura (Nuvem VM) - Servidor Virtual Privado (VPS) Uso da Infraestrutura: Django na Nuvem VM criada","title":"Private cloud"},{"location":"roteiros/3.Private_Cloud_Stack/#criando-a-infraestrutura-nuvem-vm-servidor-virtual-privado-vps","text":"Nesse roteiro vamos instalar um conjunto de aplica\u00e7\u00f5es denominado Openstack que vai permitir distribuirmos virtual machines usando os n\u00f3s dispon\u00edveis no kit. At\u00e9 o momento usamos o mass para orquestrar o bare metal e o juju para cuidar do deployment de aplicacoes (exemplo Wordpress). E agora vamos utilizar o Openstack para criar VMs e distribuir os servi\u00e7os em todas as m\u00e1quinas kit com maior eficiencia.","title":"Criando a Infraestrutura (Nuvem VM) - Servidor Virtual Privado (VPS)"},{"location":"roteiros/3.Private_Cloud_Stack/#instalando-openstack-canonical-distro","text":"Fa\u00e7a o download do charm Openstack Base no maas: $ charm pull cs:openstack-base Dentro do diret\u00f3rio criado, edite o arquivo bundle.yaml : identifique quantas m\u00e1quinas ser\u00e3o alocadas. verifique cada um dos servi\u00e7os que ser\u00e3o instalados e em quais m\u00e1quinas. sete o nome do adaptador de rede, br-ex:eth1 na vari\u00e1vel data-port . Cuidado para n\u00e3o errar (seguir https://charmhub.io/openstack-base ) variables: openstack-origin: &openstack-origin cloud:focal-yoga data-port: &data-port br-ex:eth1 worker-multiplier: &worker-multiplier 0.25 osd-devices: &osd-devices /dev/sdb /dev/vdb expected-osd-count: &expected-osd-count 3 expected-mon-count: &expected-mon-count 3 Reservar (Allocate) a m\u00e1quina \"server2\" no maas. Instale o bundle customizado: $ juju deploy ./bundle.yaml Hora da leitura na documentacao pedida no comeco do roteiro Warning Provavelmente ocorreu um erro no deploy . ??? Conceito importante: Ao contr\u00e1rio do Ansible, Juju necessita de uma m\u00e1quina exclusiva para controlar todo o deploy. Essa m\u00e1quina \u00e9 alocada automaticamente durante o bootstrap e controlar\u00e1 todo o deploy. Logo voc\u00ea precisa fazer o bootstrap de um novo controlador no server1. Voc\u00eas j\u00e1 sabem o que fazer agora: utilizar o comando abaixo para ficar de olho no status do Juju: $ watch -n 2 -c \"juju status --color\" Enquanto aguarda a insta\u00e7\u00e3o at\u00e9 a indica\u00e7\u00e3o 'certificates' awaiting server certificate data e at\u00e9 que o servi\u00e7o Vault esteja bloqueado. Responda abaixo: Exercise QUESTOES-1 Conforme visto no arquivo de instala\u00e7\u00e3o, os servi\u00e7os s\u00e3o instalados usando LXD nos nodes. O que \u00e9 LXD? Baseado na distribui\u00e7\u00e3o do bundle.yaml e no juju status, fa\u00e7a um desenho de como \u00e9 a sua arquitetura de solu\u00e7\u00e3o: um ret\u00e2ngulo grande para cada m\u00e1quina f\u00edsica. coloque um ret\u00e2ngulo para cada lxd (container) dentro da respectiva m\u00e1quina. dentro de cada ret\u00e2ngulo, escreva o nome do servi\u00e7o. realize a liga\u00e7\u00e3o entre os servi\u00e7os baseando-se nas rela\u00e7\u00f5es. Vault \u00e9 um servidor de secrets . Como ele funciona e para o que ele \u00e9 usado?","title":"Instalando - Openstack Canonical Distro"},{"location":"roteiros/3.Private_Cloud_Stack/#abrindo-o-cofre","text":"Para dar prosseguimento, precisamos instalar um certificado v\u00e1lido dentro do Vault, para isso precisamos fazer uma opera\u00e7\u00e3o de unseal : Instalando o cli do Vault e configurando-o: $ sudo snap install vault $ export VAULT_ADDR=\"http://<IP of vault unit>:8200\" Gerando : $ vault operator init -key-shares=5 -key-threshold=3 Voc\u00eas receber\u00e3o 5 Unseal Keys e 1 Initial Root Token . Copie e reserve. Removendo o selo, repita a opera\u00e7\u00e3o com 3 keys diferentes: $ vault operator unseal <Unseal Key> Autorizando o charm (esse passo precisa ser feito em 10 minutos): $ export VAULT_TOKEN=<Initial Root Token> $ vault token create -ttl=10m anote o token gerado pelo comando e use abaixo. $ juju run-action --wait vault/leader authorize-charm token=<token> Finalmente, gerando o certificado: $ juju run-action --wait vault/leader generate-root-ca Espere at\u00e9 TODOS os servicos ficarem com o Status \"active\", exceto o servi\u00e7o ceph-radosgw , que deve estar bloqueado. Para seguir em frente o seu juju status deveria ter a seguinte apar\u00eancia:","title":"Abrindo o cofre"},{"location":"roteiros/3.Private_Cloud_Stack/#configurando-o-openstack","text":"Chegou a hora de configurar o servi\u00e7o que controla as VMs (Nova), os volumes de disco (Cinder) e a estrutura de rede virtual (Neutron). O primeiro passo \u00e9 carregar as vari\u00e1veis de ambiente e autenticar (Keystone) no sistema. Ainda, montaremos o nosso servidor de imagens (Glance), que utiliza o Object Storage (Ceph) para armazenamento. O sistema ainda conta com um dashboard (Horizon), um cluster de banco de dados (Mysql Inno Cluster) e um servidor de filas (RabbitMQ) como apoio.","title":"Configurando o Openstack"},{"location":"roteiros/3.Private_Cloud_Stack/#usando-como-base-a-pagina-do-charm-instalado-httpsjaasaiopenstack-base-leia-o-documento-inteiro-antes-de-iniciar-os-comandos","text":"","title":"Usando como base a p\u00e1gina do charm instalado (https://jaas.ai/openstack-base/), LEIA O DOCUMENTO INTEIRO ANTES DE INICIAR OS COMANDOS."},{"location":"roteiros/3.Private_Cloud_Stack/#acesse-o-horizon-dashboard-como-administrador","text":"Dica O Domain name \u00e9 : admin_domain Exercise CheckPoint-1 De um print das Telas abaixo: Do Dashboard do MAAS com as m\u00e1quinas. Da aba compute overview no OpenStack . Da aba compute instances no OpenStack . Da aba network topology no OpenStack . Prestem muita aten\u00e7\u00e3o nos passos! N\u00e3o copie e cole comandos sem verificar os argumentos. Come\u00e7e a partir da se\u00e7\u00e3o Install the OpenStack clients Instale o client do Openstack no maas via snap. Carregue as credenciais em openrc e verifique os servi\u00e7os: $ openstack service list Fa\u00e7a pequenos ajustes na rede: $ juju config neutron-api enable-ml2-dns=\"true\" $ juju config neutron-api-plugin-ovn dns-servers=\"192.168.0.1\" Importe a imagem do Ubuntu Focal e Bionic. Voc\u00ea precisar\u00e1 procurar a imagem do Bionic. Configure a rede externa. Usar uma faixa de aloca\u00e7\u00e3o entre 192.168.7.0 e 192.168.8.255. Crie a rede interna e o roteador. Usar a subnet 192.169.0.0/24. N\u00e3o use DNS. Analise o comando: $ openstack flavor create --help Crie os flavors (instance type) - SEM ephemeral disk : m1.tiny: 1 vcpu/1Gb RAM/20Gb disk m1.small: 1 vcpus/2Gb RAM/20Gb disk m1.medium: 2 vcpus/4Gb RAM/20Gb disk m1.large: 4 vcpus/8Gb RAM/20Gb disk Importe (upload) um key-pair, usando public key (id_rsa.pub) do pr\u00f3prio MaaS. Acesse o Horizon ( dashboard ) como administrador: Adicione a libera\u00e7\u00e3o do SSH e ALL ICMP no security group default . Verifique se a topologia de rede faz sentido. Ela deve ser semelhante ao projeto da sua rede f\u00edsica, por\u00e9m com mais um n\u00edvel dentro. Essa rede n\u00e3o existe fisicamente, \u00e9 tudo virtual. Dispare uma inst\u00e2ncia m1.tiny com o nome client e sem Novo Volume . Aloque um floating IP para a inst\u00e2ncia. Teste a conex\u00e3o SSH! Em caso de erro, volte e verifique se as etapas anteriores est\u00e3o corretas. Exercise CheckPoint-2 De um print das Telas abaixo: Do Dashboard do MAAS com as m\u00e1quinas. Da aba compute overview no OpenStack . Da aba compute instances no OpenStack . Da aba network topology no OpenStack . Enumere as diferencas encontradas entre os prints das telas no Checkpoint1 e o Checkpoint-2. Explique como cada recurso foi criado.","title":"Acesse o Horizon (dashboard) como administrador"},{"location":"roteiros/3.Private_Cloud_Stack/#configurando-imagens-do-ubuntu-para-uso-metadata","text":"Na m\u00e1quina main, vamos adicionar o servi\u00e7o Glance Simplestreams. juju deploy glance-simplestreams-sync --to 0 juju add-relation glance-simplestreams-sync:identity-service keystone:identity-service Execute o comando juju run-action glance-simplestreams-sync/0 sync-images --wait e aguarde a conclus\u00e3o acompanhando via juju status .","title":"Configurando imagens do Ubuntu para uso (Metadata)"},{"location":"roteiros/3.Private_Cloud_Stack/#escalando-os-nos","text":"Vamos adicionar o openstack no cluster como n\u00f3 de computing e block storage . Verfique no Dashboard do MaaS se ainda h\u00e1 uma m\u00e1quina dispon\u00edvel (m\u00e1quina que reservamos/allocated). Fa\u00e7a o release da m\u00e1quina que est\u00e1 ALLOCATED (cuidado para n\u00e3o errar!) Instale o hypervisor, realizando o deploy na m\u00e1quina: $ juju add-unit nova-compute Anote o n\u00famero da m\u00e1quina adicionada no status e instale o block storage: $ juju add-unit --to <machine-id> ceph-osd Exercise QUESTOES-2 Qual a fun\u00e7\u00e3o do Glance? O que o comando abaixo faz? juju run-action glance-simplestreams-sync/0 sync-images --wait Para que serve o Metadata gerada pelo glance? Fa\u00e7a um desenho de como \u00e9 a sua arquitetura de rede, desde a sua conex\u00e3o com o Insper at\u00e9 a inst\u00e2ncia alocada. O que \u00e9 um Hypervisor? Qual o hypervisor do Openstack, da AWS e da Azure?","title":"Escalando os n\u00f3s"},{"location":"roteiros/3.Private_Cloud_Stack/#uso-da-infraestrutura-django-na-nuvem-vm-criada","text":"Agora conseguimos corrigir o erro apontado na conclus\u00e3o do H2, levantando a mesma aplica\u00e7\u00e3o django mas sem precisar sacrificar 4 m\u00e1quinas inteiras. Tarefa : Levantar a aplica\u00e7\u00e3o django do Roteiro1 at\u00e9 o Roteiro2 (com Nginx) em cima das maquinas virtuais do Openstack. TOPOLOGIA: Exercise Escreva um relat\u00f3rio dos passos utilizados. Anexe fotos e/ou diagramas contendo: arquitetura de rede do Django dentro do Openstack* ( Dica: use o dashboard do Openstack ), lista de VMs utilizadas com nome e IPs alocados, foto do Dashboard Django conectado na m\u00e1quina Nginx/LB. Exercise QUESTOES-3 Dado que voc\u00eas trabalharam com Nuvem P\u00fablica e com Nuvem Privada, descreva com detalhes como voc\u00ea montaria uma Nuvem H\u00edbrida. Como seria a troca de dados? \u00c9 poss\u00edvel somar todo o hardware dispon\u00edvel e disparar uma inst\u00e2ncia gigante (ex: mais mem\u00f3ria do que dispon\u00edvel na melhor m\u00e1quina)? Discorra sobre as possibilidades. Cite e explique pelo menos 2 circunst\u00e2ncias em que a Private Cloud \u00e9 mais vantajosa que a Public Cloud . Openstack \u00e9 um Sistema Operacional? Descreva seu prop\u00f3sito e cite as principais distribui\u00e7\u00f5es? Quais s\u00e3o os principais componentes dentro do Openstack? Descreva brevemente suas funcionalidades.","title":"Uso da Infraestrutura: Django na Nuvem VM criada"},{"location":"roteiros/4.IaC/","text":"SLA, DR e IaC \u00b6 Objetivos Entender os conceitos b\u00e1sicos Infraestrutura como c\u00f3digo. Entender os conceitos b\u00e1sicos sobre SLA e DR. Pr\u00e9-requisitos: Terminar o cap\u00edtulo anterior (Openstack) Realizar a leitura [Kavis - Cap 11 e Cap 13] Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 3 partes principais. Entendendo IaC - Vis\u00e3o Geral Criando a Infraestrutura utilizando IaC Criando um plano de Disaster Recovery e SLA (QUESTOES) IaC Vis\u00e3o geral \u00b6 Infraestrutura como c\u00f3digo (IaC) \u00e9 o gerenciamento e provisionamento de infraestrutura por meio de c\u00f3digo, em vez de processos manuais. Utilizando o IaC, \u00e9 poss\u00edvel criar arquivos de configura\u00e7\u00e3o que contenham especifica\u00e7\u00f5es de infraestrutura, o que facilita a edi\u00e7\u00e3o e distribui\u00e7\u00e3o das configura\u00e7\u00f5es. Tamb\u00e9m garante que voc\u00ea sempre forne\u00e7a o mesmo ambiente. Ao codificar e documentar suas especifica\u00e7\u00f5es de configura\u00e7\u00e3o, o IaC auxilia no gerenciamento de configura\u00e7\u00e3o e ajuda a evitar altera\u00e7\u00f5es de configura\u00e7\u00e3o n\u00e3o documentadas. O IaC evoluiu para lidar com a deriva ambiental em dutos de libera\u00e7\u00e3o. Sem o IaC, as equipes teriam que manter as configura\u00e7\u00f5es do ambiente de implanta\u00e7\u00e3o separadamente. Com o tempo, cada ambiente se torna um \"floco de neve\", uma configura\u00e7\u00e3o \u00fanica que n\u00e3o pode ser replicada automaticamente. Inconsist\u00eancias entre ambientes podem causar problemas de implanta\u00e7\u00e3o. O gerenciamento e a manuten\u00e7\u00e3o da infraestrutura envolvem processos manuais que s\u00e3o propensos a erros e dif\u00edceis de rastrear. Refor\u00e7ando \u00b6 O IaC evita a configura\u00e7\u00e3o manual e garante consist\u00eancia ao expressar o estado desejado do ambiente por meio de c\u00f3digo bem documentado em formatos como por exemplo o JSON. A implanta\u00e7\u00e3o de infraestrutura com IaC \u00e9 repet\u00edvel e evita problemas de tempo de execu\u00e7\u00e3o causados \u200b\u200bpor configura\u00e7\u00f5es quebradas ou depend\u00eancias ausentes. Para fazer altera\u00e7\u00f5es, voc\u00ea precisa editar a origem, n\u00e3o o destino . A idempot\u00eancia (a capacidade de uma determinada opera\u00e7\u00e3o produzir sempre o mesmo resultado) \u00e9 um princ\u00edpio fundamental da IaC. O comando deploy sempre define o ambiente de destino com a mesma configura\u00e7\u00e3o, independentemente do estado inicial do ambiente. A idempot\u00eancia \u00e9 alcan\u00e7ada configurando automaticamente os destinos existentes ou excluindo os destinos existentes e recriando novos ambientes. O que \u00e9 Terraform em Infraestrutura como C\u00f3digo? \u00b6 \u00c9 uma das possiveis ferramentas para IaC. O mercado de Infraestrutura como C\u00f3digo amadureceu ao longo dos anos. H\u00e1 uma grande variedade de ferramentas, oferecendo diferentes recursos. Terraform \u00e9 a infraestrutura da HashiCorp como ferramenta de c\u00f3digo. Ele permite que voc\u00ea defina recursos e infraestrutura em arquivos de configura\u00e7\u00e3o declarativos leg\u00edveis por humanos e gerencie o ciclo de vida de sua infraestrutura. O uso do Terraform tem v\u00e1rias vantagens em rela\u00e7\u00e3o ao gerenciamento manual de sua infraestrutura: O Terraform pode gerenciar a infraestrutura em v\u00e1rias plataformas de nuvem. A linguagem de configura\u00e7\u00e3o leg\u00edvel por humanos ajuda voc\u00ea a escrever c\u00f3digo de infraestrutura rapidamente. O estado do Terraform permite rastrear altera\u00e7\u00f5es de recursos em todas as suas implanta\u00e7\u00f5es. Voc\u00ea pode confirmar suas configura\u00e7\u00f5es no controle de vers\u00e3o para colaborar com seguran\u00e7a na infraestrutura. Para implantar infraestrutura com o Terraform: * Scope - Identifique a infraestrutura para o seu projeto. * Author - Escreva a configura\u00e7\u00e3o para sua infraestrutura. * Initialize - Instale os plugins que o Terraform precisa para gerenciar a infraestrutura. * Plan - Visualize as altera\u00e7\u00f5es que o Terraform far\u00e1 para corresponder \u00e0 sua configura\u00e7\u00e3o. * Apply - Fa\u00e7a as altera\u00e7\u00f5es planejadas. Instalar Terraform \u00b6 Ubuntu/Debian CentOS/RHEL Windows/FreeBSD/OpenBSD/Solaris macOS wget -O- https://apt.releases.hashicorp.com/gpg | gpg --dearmor | sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg gpg --no-default-keyring --keyring /usr/share/keyrings/hashicorp-archive-keyring.gpg --fingerprint echo \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list sudo apt update && sudo apt install terraform sudo yum install -y yum-utils sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo sudo yum -y install terraform Ir na pagina oficial e baixar o pacote bin\u00e1rio https://www.terraform.io/downloads brew tap hashicorp/tap brew install hashicorp/tap/terraform Criando a Infraestrutura utilizando IaC \u00b6 Agora vamos ver como isso funciona. At\u00e9 agora voc\u00ea acessou o dashboard ou utilizou a interface de linha de comando (CLI) para criar rede, subrede, instancia, roteador e outros recursos. Vamos criar a topologia abaixo via c\u00f3digo. O Terraform conta com arquivos .tf, que definem a infraestrutura. O Terraform sabe o que \u00e9 implantado por meio do arquivo de estado. Este estado \u00e9 armazenado por padr\u00e3o em um arquivo local chamado \u201cterraform.tfstate\u201d. Tamb\u00e9m pode ser armazenado remotamente, o que funciona melhor em um ambiente de equipe. O Terraform permite v\u00e1rios provedores, normalmente inicializados em um arquivo chamado provider.tf. A estrutura de pastas ficar\u00e1 conforme figura abaixo: Crie a estrutura Dentro da pasta terraform crie os arquivos abaixo: provider.tf # Terraform Openstack deployment # Author: Tiago Demay - tiagoaodc@insper.edu.br # Define required providers terraform { required_version = \">= 0.14.0\" required_providers { openstack = { source = \"terraform-provider-openstack/openstack\" version = \"~> 1.35.0\" } } } # Configure the OpenStack Provider provider \"openstack\" { cacert_file =\"/home/cloud/snap/openstackclients/common/root-ca.crt\" auth_url = \"https://192.168.0.120:5000/v3\" region = \"RegionOne\" user_name = \"admin\" # password = \"PASSWORD_USER\" } instance.tf resource \"openstack_compute_instance_v2\" \"instancia\" { name = \"basic\" image_name = \"bionic-amd64\" flavor_name = \"m1.small\" key_pair = \"mykey\" security_groups = [\"default\"] network { name = \"network_1\" } depends_on = [openstack_networking_network_v2.network_1] } network.tf resource \"openstack_networking_network_v2\" \"network_1\" { name = \"network_1\" admin_state_up = \"true\" } resource \"openstack_networking_subnet_v2\" \"subnet_1\" { network_id = \"${openstack_networking_network_v2.network_1.id}\" cidr = \"192.167.199.0/24\" } Info Alterar a variavel external_network_id = <\"ID_EXT_NETWORK\"> para o ID da sua rede externa, voc\u00ea pode encontrar esta informac\u00e3o, acessando o Dashboard do Openstack ou via CLI openstack router.tf resource \"openstack_networking_router_v2\" \"router_1\" { name = \"my_router\" admin_state_up = true external_network_id = <\"ID_EXT_NETWORK\"> } resource \"openstack_networking_router_interface_v2\" \"int_1\" { router_id = \"${openstack_networking_router_v2.router_1.id}\" subnet_id = \"${openstack_networking_subnet_v2.subnet_1.id}\" } Criando um plano de Disaster Recovery e SLA (QUESTOES) \u00b6 Exercise QUESTOES Qual o conceito por tr\u00e1s de Edge Computing? (Obs: N\u00e3o \u00e9 a rede de celular 2G) Voc\u00ea \u00e9 o CTO (Chief Technology Officer) de uma grande empresa com sede em v\u00e1rias capitais no Brasil e precisa implantar um sistema cr\u00edtico, de baixo custo e com dados sigilosos para a \u00e1rea operacional. Voc\u00ea escolheria Public Cloud ou Private Cloud? Agora explique para ao RH por que voc\u00ea precisa de um time de DevOps. Considerando o mesmo sistema cr\u00edtico, agora sua equipe dever\u00e1 planejar e implementar um ambiente resiliente e capaz de mitigar poss\u00edveis interrup\u00e7\u00f5es/indisponibilidades. Para isso, identifiquem quais s\u00e3o as principais amea\u00e7as que podem colocar sua infraestrutura em risco, e descreva as principais a\u00e7\u00f5es que possibilitem o restabelecimento de todas as aplica\u00e7\u00f5es de forma r\u00e1pida e organizada caso algum evento cause uma interrup\u00e7\u00e3o ou incidente de seguran\u00e7a. Para isso monte um plano de DR e HA que considere entre as a\u00e7\u00f5es: Mapeamento das principais amea\u00e7as que podem colocar em riscos o seu ambiente. Elenque e priorize as a\u00e7\u00f5es para a recupera\u00e7\u00e3o de seu ambiente em uma poss\u00edvel interrup\u00e7\u00e3o/desastre. Como sua equipe ir\u00e1 tratar a pol\u00edtica de backup? Considerando poss\u00edveis instabilidades e problemas, descreva como alta disponibilidade ser\u00e1 implementada em sua infraestrutura.","title":"Computa\u00e7\u00e3o em Nuvem"},{"location":"roteiros/4.IaC/#sla-dr-e-iac","text":"Objetivos Entender os conceitos b\u00e1sicos Infraestrutura como c\u00f3digo. Entender os conceitos b\u00e1sicos sobre SLA e DR. Pr\u00e9-requisitos: Terminar o cap\u00edtulo anterior (Openstack) Realizar a leitura [Kavis - Cap 11 e Cap 13] Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 3 partes principais. Entendendo IaC - Vis\u00e3o Geral Criando a Infraestrutura utilizando IaC Criando um plano de Disaster Recovery e SLA (QUESTOES)","title":"SLA, DR e IaC"},{"location":"roteiros/4.IaC/#iac-visao-geral","text":"Infraestrutura como c\u00f3digo (IaC) \u00e9 o gerenciamento e provisionamento de infraestrutura por meio de c\u00f3digo, em vez de processos manuais. Utilizando o IaC, \u00e9 poss\u00edvel criar arquivos de configura\u00e7\u00e3o que contenham especifica\u00e7\u00f5es de infraestrutura, o que facilita a edi\u00e7\u00e3o e distribui\u00e7\u00e3o das configura\u00e7\u00f5es. Tamb\u00e9m garante que voc\u00ea sempre forne\u00e7a o mesmo ambiente. Ao codificar e documentar suas especifica\u00e7\u00f5es de configura\u00e7\u00e3o, o IaC auxilia no gerenciamento de configura\u00e7\u00e3o e ajuda a evitar altera\u00e7\u00f5es de configura\u00e7\u00e3o n\u00e3o documentadas. O IaC evoluiu para lidar com a deriva ambiental em dutos de libera\u00e7\u00e3o. Sem o IaC, as equipes teriam que manter as configura\u00e7\u00f5es do ambiente de implanta\u00e7\u00e3o separadamente. Com o tempo, cada ambiente se torna um \"floco de neve\", uma configura\u00e7\u00e3o \u00fanica que n\u00e3o pode ser replicada automaticamente. Inconsist\u00eancias entre ambientes podem causar problemas de implanta\u00e7\u00e3o. O gerenciamento e a manuten\u00e7\u00e3o da infraestrutura envolvem processos manuais que s\u00e3o propensos a erros e dif\u00edceis de rastrear.","title":"IaC Vis\u00e3o geral"},{"location":"roteiros/4.IaC/#reforcando","text":"O IaC evita a configura\u00e7\u00e3o manual e garante consist\u00eancia ao expressar o estado desejado do ambiente por meio de c\u00f3digo bem documentado em formatos como por exemplo o JSON. A implanta\u00e7\u00e3o de infraestrutura com IaC \u00e9 repet\u00edvel e evita problemas de tempo de execu\u00e7\u00e3o causados \u200b\u200bpor configura\u00e7\u00f5es quebradas ou depend\u00eancias ausentes. Para fazer altera\u00e7\u00f5es, voc\u00ea precisa editar a origem, n\u00e3o o destino . A idempot\u00eancia (a capacidade de uma determinada opera\u00e7\u00e3o produzir sempre o mesmo resultado) \u00e9 um princ\u00edpio fundamental da IaC. O comando deploy sempre define o ambiente de destino com a mesma configura\u00e7\u00e3o, independentemente do estado inicial do ambiente. A idempot\u00eancia \u00e9 alcan\u00e7ada configurando automaticamente os destinos existentes ou excluindo os destinos existentes e recriando novos ambientes.","title":"Refor\u00e7ando"},{"location":"roteiros/4.IaC/#o-que-e-terraform-em-infraestrutura-como-codigo","text":"\u00c9 uma das possiveis ferramentas para IaC. O mercado de Infraestrutura como C\u00f3digo amadureceu ao longo dos anos. H\u00e1 uma grande variedade de ferramentas, oferecendo diferentes recursos. Terraform \u00e9 a infraestrutura da HashiCorp como ferramenta de c\u00f3digo. Ele permite que voc\u00ea defina recursos e infraestrutura em arquivos de configura\u00e7\u00e3o declarativos leg\u00edveis por humanos e gerencie o ciclo de vida de sua infraestrutura. O uso do Terraform tem v\u00e1rias vantagens em rela\u00e7\u00e3o ao gerenciamento manual de sua infraestrutura: O Terraform pode gerenciar a infraestrutura em v\u00e1rias plataformas de nuvem. A linguagem de configura\u00e7\u00e3o leg\u00edvel por humanos ajuda voc\u00ea a escrever c\u00f3digo de infraestrutura rapidamente. O estado do Terraform permite rastrear altera\u00e7\u00f5es de recursos em todas as suas implanta\u00e7\u00f5es. Voc\u00ea pode confirmar suas configura\u00e7\u00f5es no controle de vers\u00e3o para colaborar com seguran\u00e7a na infraestrutura. Para implantar infraestrutura com o Terraform: * Scope - Identifique a infraestrutura para o seu projeto. * Author - Escreva a configura\u00e7\u00e3o para sua infraestrutura. * Initialize - Instale os plugins que o Terraform precisa para gerenciar a infraestrutura. * Plan - Visualize as altera\u00e7\u00f5es que o Terraform far\u00e1 para corresponder \u00e0 sua configura\u00e7\u00e3o. * Apply - Fa\u00e7a as altera\u00e7\u00f5es planejadas.","title":"O que \u00e9 Terraform em Infraestrutura como C\u00f3digo?"},{"location":"roteiros/4.IaC/#instalar-terraform","text":"Ubuntu/Debian CentOS/RHEL Windows/FreeBSD/OpenBSD/Solaris macOS wget -O- https://apt.releases.hashicorp.com/gpg | gpg --dearmor | sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg gpg --no-default-keyring --keyring /usr/share/keyrings/hashicorp-archive-keyring.gpg --fingerprint echo \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list sudo apt update && sudo apt install terraform sudo yum install -y yum-utils sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo sudo yum -y install terraform Ir na pagina oficial e baixar o pacote bin\u00e1rio https://www.terraform.io/downloads brew tap hashicorp/tap brew install hashicorp/tap/terraform","title":"Instalar Terraform"},{"location":"roteiros/4.IaC/#criando-a-infraestrutura-utilizando-iac","text":"Agora vamos ver como isso funciona. At\u00e9 agora voc\u00ea acessou o dashboard ou utilizou a interface de linha de comando (CLI) para criar rede, subrede, instancia, roteador e outros recursos. Vamos criar a topologia abaixo via c\u00f3digo. O Terraform conta com arquivos .tf, que definem a infraestrutura. O Terraform sabe o que \u00e9 implantado por meio do arquivo de estado. Este estado \u00e9 armazenado por padr\u00e3o em um arquivo local chamado \u201cterraform.tfstate\u201d. Tamb\u00e9m pode ser armazenado remotamente, o que funciona melhor em um ambiente de equipe. O Terraform permite v\u00e1rios provedores, normalmente inicializados em um arquivo chamado provider.tf. A estrutura de pastas ficar\u00e1 conforme figura abaixo: Crie a estrutura Dentro da pasta terraform crie os arquivos abaixo: provider.tf # Terraform Openstack deployment # Author: Tiago Demay - tiagoaodc@insper.edu.br # Define required providers terraform { required_version = \">= 0.14.0\" required_providers { openstack = { source = \"terraform-provider-openstack/openstack\" version = \"~> 1.35.0\" } } } # Configure the OpenStack Provider provider \"openstack\" { cacert_file =\"/home/cloud/snap/openstackclients/common/root-ca.crt\" auth_url = \"https://192.168.0.120:5000/v3\" region = \"RegionOne\" user_name = \"admin\" # password = \"PASSWORD_USER\" } instance.tf resource \"openstack_compute_instance_v2\" \"instancia\" { name = \"basic\" image_name = \"bionic-amd64\" flavor_name = \"m1.small\" key_pair = \"mykey\" security_groups = [\"default\"] network { name = \"network_1\" } depends_on = [openstack_networking_network_v2.network_1] } network.tf resource \"openstack_networking_network_v2\" \"network_1\" { name = \"network_1\" admin_state_up = \"true\" } resource \"openstack_networking_subnet_v2\" \"subnet_1\" { network_id = \"${openstack_networking_network_v2.network_1.id}\" cidr = \"192.167.199.0/24\" } Info Alterar a variavel external_network_id = <\"ID_EXT_NETWORK\"> para o ID da sua rede externa, voc\u00ea pode encontrar esta informac\u00e3o, acessando o Dashboard do Openstack ou via CLI openstack router.tf resource \"openstack_networking_router_v2\" \"router_1\" { name = \"my_router\" admin_state_up = true external_network_id = <\"ID_EXT_NETWORK\"> } resource \"openstack_networking_router_interface_v2\" \"int_1\" { router_id = \"${openstack_networking_router_v2.router_1.id}\" subnet_id = \"${openstack_networking_subnet_v2.subnet_1.id}\" }","title":"Criando a Infraestrutura utilizando IaC"},{"location":"roteiros/4.IaC/#criando-um-plano-de-disaster-recovery-e-sla-questoes","text":"Exercise QUESTOES Qual o conceito por tr\u00e1s de Edge Computing? (Obs: N\u00e3o \u00e9 a rede de celular 2G) Voc\u00ea \u00e9 o CTO (Chief Technology Officer) de uma grande empresa com sede em v\u00e1rias capitais no Brasil e precisa implantar um sistema cr\u00edtico, de baixo custo e com dados sigilosos para a \u00e1rea operacional. Voc\u00ea escolheria Public Cloud ou Private Cloud? Agora explique para ao RH por que voc\u00ea precisa de um time de DevOps. Considerando o mesmo sistema cr\u00edtico, agora sua equipe dever\u00e1 planejar e implementar um ambiente resiliente e capaz de mitigar poss\u00edveis interrup\u00e7\u00f5es/indisponibilidades. Para isso, identifiquem quais s\u00e3o as principais amea\u00e7as que podem colocar sua infraestrutura em risco, e descreva as principais a\u00e7\u00f5es que possibilitem o restabelecimento de todas as aplica\u00e7\u00f5es de forma r\u00e1pida e organizada caso algum evento cause uma interrup\u00e7\u00e3o ou incidente de seguran\u00e7a. Para isso monte um plano de DR e HA que considere entre as a\u00e7\u00f5es: Mapeamento das principais amea\u00e7as que podem colocar em riscos o seu ambiente. Elenque e priorize as a\u00e7\u00f5es para a recupera\u00e7\u00e3o de seu ambiente em uma poss\u00edvel interrup\u00e7\u00e3o/desastre. Como sua equipe ir\u00e1 tratar a pol\u00edtica de backup? Considerando poss\u00edveis instabilidades e problemas, descreva como alta disponibilidade ser\u00e1 implementada em sua infraestrutura.","title":"Criando um plano de Disaster Recovery e SLA (QUESTOES)"},{"location":"roteiros/5.K8s/","text":"Containers e K8s \u00b6 Objetivos Entender os conceitos b\u00e1sicos sobre Cont\u00eaineres e seus Orquestradores. Instalar o Octavia no Openstack Integrar o Openstack e o Kubernetes Pr\u00e9-requisitos: Terminar o cap\u00edtulo anterior (SLA,DR e IaC) Realizar a leitura sobre o Docker. [ https://docs.docker.com/engine/docker-overview/ ]. Realizar a leitura sobre o Kubernetes. [ https://kubernetes.io/docs/concepts/ ]. Realizar a leitura do Octavia. [ https://docs.openstack.org/octavia/latest/ ]. Realizar a leitura do Barbican. [ https://docs.openstack.org/barbican/latest/ ]. Realizar a leitura dos Charms. [ https://jaas.ai/vault , https://jaas.ai/octavia , https://jaas.ai/barbican ]. Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 3 partes principais. Entendendo tipos de implantacoes - Vis\u00e3o Geral Adicionando Octavia (Load Balancer) na Nuvem privada(Openstack) Utilizando Docker e Kubernetes TARGET \u00b6 DO INICIO DO ROTEIRO 1 ATE ONDE CHEGAMOS NO FIM DESTE ROTEIRO \u00b6 Tipo de implantacoes \u00b6 Tradicional \u00b6 Inicialmente, as organiza\u00e7\u00f5es executavam aplicativos em servidores f\u00edsicos. Os limites de recursos n\u00e3o podem ser definidos para aplicativos em servidores f\u00edsicos, o que causa problemas de aloca\u00e7\u00e3o de recursos. Por exemplo, se v\u00e1rios aplicativos estiverem sendo executados em um servidor f\u00edsico, pode haver uma situa\u00e7\u00e3o em que um aplicativo consuma mais recursos, resultando em um desempenho insatisfat\u00f3rio de outros aplicativos. A solu\u00e7\u00e3o para isso \u00e9 executar cada aplicativo em um servidor f\u00edsico diferente. Mas isso n\u00e3o aumentou porque os recursos s\u00e3o subutilizados e \u00e9 caro para as organiza\u00e7\u00f5es manter muitos servidores f\u00edsicos. Virtualizada \u00b6 Como solu\u00e7\u00e3o, a virtualiza\u00e7\u00e3o foi introduzida. Ele permite que voc\u00ea execute v\u00e1rias m\u00e1quinas virtuais (VMs) na CPU de um \u00fanico servidor f\u00edsico. A virtualiza\u00e7\u00e3o permite que os aplicativos sejam isolados entre VMs e fornece um n\u00edvel de seguran\u00e7a que as informa\u00e7\u00f5es de um aplicativo n\u00e3o podem ser acessadas livremente por outro aplicativo. A virtualiza\u00e7\u00e3o permite uma melhor utiliza\u00e7\u00e3o dos recursos em servidores f\u00edsicos e uma melhor escalabilidade, pois os aplicativos podem ser facilmente adicionados ou atualizados, os custos de hardware s\u00e3o reduzidos e muito mais. Com a virtualiza\u00e7\u00e3o, voc\u00ea pode apresentar um conjunto de recursos f\u00edsicos como um cluster de m\u00e1quinas virtuais descart\u00e1veis. Cada VM \u00e9 uma m\u00e1quina completa, executando todos os componentes, incluindo seu pr\u00f3prio sistema operacional, sobre hardware virtualizado. Conteinerizada \u00b6 Os cont\u00eaineres s\u00e3o pacotes leves do c\u00f3digo do seu aplicativo, juntamente com depend\u00eancias, como vers\u00f5es espec\u00edficas de tempos de execu\u00e7\u00e3o de linguagem de programa\u00e7\u00e3o e bibliotecas necess\u00e1rias para executar seus servi\u00e7os de software. Os cont\u00eaineres facilitam o compartilhamento de recursos de CPU, mem\u00f3ria, armazenamento e rede no n\u00edvel dos sistemas operacionais e oferecem um mecanismo de empacotamento l\u00f3gico no qual os aplicativos podem ser abstra\u00eddos do ambiente em que realmente s\u00e3o executados. Os cont\u00eaineres virtualizam no n\u00edvel do sistema operacional enquanto as VMs virtualizam no n\u00edvel do hardware Instalando e Configurando o Octavia (Loadbalancer para Openstack) \u00b6 No servidor Main: Fa\u00e7a o download do arquivo loadbalancer-octavia.yaml no Github openstack-charmers/openstack-bundles Entre na pasta openstack Vamos pedir pro juju aplicar as modificacoes do bundle customizado com o overlay. juju deploy ./bundle.yaml --overlay loadbalancer-octavia.yaml Voc\u00eas j\u00e1 sabem o que fazer agora, Ler a documentacao sobre K8S e Docker, mas de olho no status do Juju. \u00b6 Agora vamos criar os certificados necess\u00e1rios. mkdir -p demoCA/newcerts touch demoCA/index.txt touch demoCA/index.txt.attr openssl genpkey -algorithm RSA -aes256 -pass pass:foobar -out issuing_ca_key.pem openssl req -x509 -passin pass:foobar -new -nodes -key issuing_ca_key.pem \\ -config /etc/ssl/openssl.cnf \\ -subj \"/C=US/ST=Somestate/O=Org/CN=www.example.com\" \\ -days 30 \\ -out issuing_ca.pem openssl genpkey -algorithm RSA -aes256 -pass pass:foobar -out controller_ca_key.pem openssl req -x509 -passin pass:foobar -new -nodes \\ -key controller_ca_key.pem \\ -config /etc/ssl/openssl.cnf \\ -subj \"/C=US/ST=Somestate/O=Org/CN=www.example.com\" \\ -days 30 \\ -out controller_ca.pem openssl req \\ -newkey rsa:2048 -nodes -keyout controller_key.pem \\ -subj \"/C=US/ST=Somestate/O=Org/CN=www.example.com\" \\ -out controller.csr openssl ca -passin pass:foobar -config /etc/ssl/openssl.cnf \\ -cert controller_ca.pem -keyfile controller_ca_key.pem \\ -create_serial -batch \\ -in controller.csr -days 30 -out controller_cert.pem cat controller_cert.pem controller_key.pem > controller_cert_bundle.pem Abra o cofre VAULT novamente... \u00b6 Adicionando variavel de ambiente VAULT: export VAULT_ADDR=\"http://<IP of vault unit>:8200\" Removendo o selo, repita a opera\u00e7\u00e3o com 3 keys diferentes: vault operator unseal <Unseal Key> Autorizando o charm: export VAULT_TOKEN=<Initial Root Token> vault token create -ttl=10m Anote o token gerado pelo comando e use abaixo: juju run-action --wait vault/leader authorize-charm token=<token> juju run-action --wait vault/leader generate-root-ca Ainda no Servidor main , vamos aumentar alguns limites: openstack quota set --cores 100 [ID do Projeto] openstack quota set --instances 100 [ID do Projeto] Configurando o Octavia com as alteracoes \u00b6 Passo1 juju config octavia \\ lb-mgmt-issuing-cacert=\"$(base64 issuing_ca.pem)\" \\ lb-mgmt-issuing-ca-private-key=\"$(base64 issuing_ca_key.pem)\" \\ lb-mgmt-issuing-ca-key-passphrase=foobar \\ lb-mgmt-controller-cacert=\"$(base64 controller_ca.pem)\" \\ lb-mgmt-controller-cert=\"$(base64 controller_cert_bundle.pem)\" Passo2 juju config octavia loadbalancer-topology=ACTIVE_STANDBY spare-pool-size=4 juju run-action --wait glance-simplestreams-sync/0 sync-images \u00b6 Hold your breath! \u00b6 Criando imagem \u00b6 Passo1 juju run-action --wait octavia-diskimage-retrofit/leader retrofit-image \u00b6 Passo2 openstack image list openstack image set --tag octavia-diskimage-retrofit --tag octavia-amphora [id amphora image] juju run-action --wait octavia/0 configure-resources No cap\u00edtulo 3, foi realizada a implanta\u00e7\u00e3o do Openstack no hardware dispon\u00edvel. Al\u00e9m de VMs, o Openstack consegue tamb\u00e9m manipular containers, tal qual o MaaS e o Juju. Contudo o grande problema \u00e9 que n\u00e3o basta apenas criar e destruir um container, \u00e9 preciso administrar uma complexa arquitetura, monitorando e controlando um conjunto de containers que representam uma implanta\u00e7\u00e3o de um sistema. WebServer \u00b6 Criar uma inst\u00e2ncia m1.small com IP p\u00fablico no Openstack, nomea-la como juju-openstack Acessar a instancia criada Vamos criar um WebServer em NodeJS Criar o arquivo ~/hello-node/server.js #!/usr/bin/env nodejs var http = require('http'); var os = require('os'); var handleRequest = function(request, response) { console.log('Received request for URL: ' + request.url); response.writeHead(200); response.end('{ \"host\": ' + os.hostname() + ', \"message\": \"Hello World!\"}'); }; var www = http.createServer(handleRequest); www.listen(8080); console.log('Server running at http://localhost:8080/'); Testar o WebServer rodando localmente no terminal. sudo apt install nodejs ./server.js Exercise CheckPoint-1 WebServer De um print das Telas abaixo: Da aba network topology no OpenStack . Das regras do Security Group utilizado Da Aba do navegador com o WebServer Rodando. Instalar o Docker \u00b6 Arquitetura Docker sudo apt-get update sudo apt install build-essential apt-transport-https curl curl -fsSL https://get.docker.com | sh - sudo usermod -aG docker $USER newgrp docker docker version docker run hello-world Criar uma um arquivo ~/hello-node/Dockerfile que dar\u00e1 origem ao container FROM node:6.9.2 EXPOSE 8080 COPY server.js . CMD node server.js Montar a imagem local (Cria um container com esta aplicacao webserver) docker build -t hello-node:v1 ./hello-node/ Rodar o container com a imagem criada. docker container run hello-node:v1 Exercise CheckPoint-2 Docker De um print das Telas abaixo: WebServer Rodando no navegador. Docker Hub \u00b6 Criar individualmente um login na https://hub.docker.com/ \u2022 Fazer o login no Docker \u2022 Aplicar a tag na imagem e dar o push do Docker Hub \u2022 Para mais detalhes docker --help Exercise QUESTOES-1 O que \u00e9 Docker Swarm? O que \u00e9 Docker Registry? O que \u00e9 Docker Engine? Kubernetes aka k8s \u00b6 Para facilitar o deploy do Kubernetes vamos utilizar uma \"velha conhecida\". Deja-vu (Juju Reborn) \u00b6 O Dashboard do Openstack possui alguns termos (region, instance type, security group, etc) que s\u00e3o semelhantes ao da AWS. Como visto anteriormente, Juju consegue operar sobre Public Cloud, Private Cloud, Bare-metal e Container. Para o setup ficar completo, agora vamos utilizar o Juju sobre o Openstack. Dicas Documentacao - adicionar Openstack como cloud Documentacao - adicionar integrador obrigat\u00f3rio Bundle modificado do Kubernetes-core Acesse a inst\u00e2ncia m1.tiny criada no in\u00edcio do roteiro. Fazer a instala\u00e7\u00e3o do Juju. Adicione o Openstack como Cloud Provider no Juju. Fazer o deploy do Kubernetes-core Instalar kubectl no cliente via snap. sudo snap install kubectl --classic Verificar a configura\u00e7\u00e3o do Kubernetes via kubectl kubectl cluster-info Caso tenha problemas ver: documentacao-kubernetes Configurar o kubectl proxy para utiliza\u00e7\u00e3o externa na porta 8080. Acessar o Dashboard. Fazendo um Deploy \u00b6 Fazer o deploy da imagem docker criada na sess\u00e3o anterior kubectl run hello-node --image=[user]/hello-node:v1 --port=8080 Verificar no terminal: kubectl get all Verificar o deploy status no Dashboard Expandir o deploy para 5 r\u00e9plicas do pod Exercise CheckPoint-3 Dashboard Kubernetes De um print das Telas abaixo: Do dashboard Kubernetes com as 5 replicas Acessando o Deploy \u00b6 Criar um servi\u00e7o que ir\u00e1 expor o deploy Alternativa I - ClusterIP com Ingress \u00b6 kubectl expose deployment hello-node --type=ClusterIP Criar o arquivo ingress.yaml apiVersion: extensions/v1beta1 kind: Ingress metadata: name: hello-node-ingress spec: rules: - host: hello-node.[ip do kubernetes-worker].xip.io http: paths: - path: / backend: serviceName: hello-node servicePort: 8080 * Aplicar arquivo ingress ao K8s kubectl create -f ingress.yaml Exercise CheckPoint-4 Expose Service De um print das Telas abaixo: Do comando -> kubectl get all Alternativa II - NodePort \u00b6 kubectl expose deployment hello-node --type=NodePort Verificar qual porta foi designada e liberar o security group do worker juju run --unit kubernetes-worker/[# worker] \"open-port [porta]\" Exercise CheckPoint-4 Acessar o deploy De um print das Telas abaixo: Do comando -> kubectl get all WebServer Rodando no navegador utilizando a porta aberta. Alterando o deploy \u00b6 Alterar o arquivo server.js Montar uma nova imagem com tag v2 e fa\u00e7a um push Fazer um deploy de um pod de testes Testar as altera\u00e7\u00f5es Fazer a implanta\u00e7\u00e3o imediata em produ\u00e7\u00e3o: kubectl set image deployment/hello-node hello-node=[user]/hello-node:v2 Exercise CheckPoint-5 Modificacao De um print das Telas abaixo: Do comando -> kubectl get all WebServer modificado Rodando no navegador utilizando a porta aberta. Conclus\u00e3o: SOMENTE PARA PENSAR \u00b6 Voc\u00ea desempenhou uma implanta\u00e7\u00e3o em tempo real usando Kubernetes e DockerHub. Como seria uma arquitetura de Continuous Integration/Continuous Delivery (CI/CD) real utilizando Kubernetes?","title":"Computa\u00e7\u00e3o em Nuvem"},{"location":"roteiros/5.K8s/#containers-e-k8s","text":"Objetivos Entender os conceitos b\u00e1sicos sobre Cont\u00eaineres e seus Orquestradores. Instalar o Octavia no Openstack Integrar o Openstack e o Kubernetes Pr\u00e9-requisitos: Terminar o cap\u00edtulo anterior (SLA,DR e IaC) Realizar a leitura sobre o Docker. [ https://docs.docker.com/engine/docker-overview/ ]. Realizar a leitura sobre o Kubernetes. [ https://kubernetes.io/docs/concepts/ ]. Realizar a leitura do Octavia. [ https://docs.openstack.org/octavia/latest/ ]. Realizar a leitura do Barbican. [ https://docs.openstack.org/barbican/latest/ ]. Realizar a leitura dos Charms. [ https://jaas.ai/vault , https://jaas.ai/octavia , https://jaas.ai/barbican ]. Info DIVIS\u00c3O DO ROTEIRO O Roteiro \u00e9 dividido em 3 partes principais. Entendendo tipos de implantacoes - Vis\u00e3o Geral Adicionando Octavia (Load Balancer) na Nuvem privada(Openstack) Utilizando Docker e Kubernetes","title":"Containers e K8s"},{"location":"roteiros/5.K8s/#target","text":"","title":"TARGET"},{"location":"roteiros/5.K8s/#do-inicio-do-roteiro-1-ate-onde-chegamos-no-fim-deste-roteiro","text":"","title":"DO INICIO DO ROTEIRO 1 ATE ONDE CHEGAMOS NO FIM DESTE ROTEIRO"},{"location":"roteiros/5.K8s/#tipo-de-implantacoes","text":"","title":"Tipo de implantacoes"},{"location":"roteiros/5.K8s/#tradicional","text":"Inicialmente, as organiza\u00e7\u00f5es executavam aplicativos em servidores f\u00edsicos. Os limites de recursos n\u00e3o podem ser definidos para aplicativos em servidores f\u00edsicos, o que causa problemas de aloca\u00e7\u00e3o de recursos. Por exemplo, se v\u00e1rios aplicativos estiverem sendo executados em um servidor f\u00edsico, pode haver uma situa\u00e7\u00e3o em que um aplicativo consuma mais recursos, resultando em um desempenho insatisfat\u00f3rio de outros aplicativos. A solu\u00e7\u00e3o para isso \u00e9 executar cada aplicativo em um servidor f\u00edsico diferente. Mas isso n\u00e3o aumentou porque os recursos s\u00e3o subutilizados e \u00e9 caro para as organiza\u00e7\u00f5es manter muitos servidores f\u00edsicos.","title":"Tradicional"},{"location":"roteiros/5.K8s/#virtualizada","text":"Como solu\u00e7\u00e3o, a virtualiza\u00e7\u00e3o foi introduzida. Ele permite que voc\u00ea execute v\u00e1rias m\u00e1quinas virtuais (VMs) na CPU de um \u00fanico servidor f\u00edsico. A virtualiza\u00e7\u00e3o permite que os aplicativos sejam isolados entre VMs e fornece um n\u00edvel de seguran\u00e7a que as informa\u00e7\u00f5es de um aplicativo n\u00e3o podem ser acessadas livremente por outro aplicativo. A virtualiza\u00e7\u00e3o permite uma melhor utiliza\u00e7\u00e3o dos recursos em servidores f\u00edsicos e uma melhor escalabilidade, pois os aplicativos podem ser facilmente adicionados ou atualizados, os custos de hardware s\u00e3o reduzidos e muito mais. Com a virtualiza\u00e7\u00e3o, voc\u00ea pode apresentar um conjunto de recursos f\u00edsicos como um cluster de m\u00e1quinas virtuais descart\u00e1veis. Cada VM \u00e9 uma m\u00e1quina completa, executando todos os componentes, incluindo seu pr\u00f3prio sistema operacional, sobre hardware virtualizado.","title":"Virtualizada"},{"location":"roteiros/5.K8s/#conteinerizada","text":"Os cont\u00eaineres s\u00e3o pacotes leves do c\u00f3digo do seu aplicativo, juntamente com depend\u00eancias, como vers\u00f5es espec\u00edficas de tempos de execu\u00e7\u00e3o de linguagem de programa\u00e7\u00e3o e bibliotecas necess\u00e1rias para executar seus servi\u00e7os de software. Os cont\u00eaineres facilitam o compartilhamento de recursos de CPU, mem\u00f3ria, armazenamento e rede no n\u00edvel dos sistemas operacionais e oferecem um mecanismo de empacotamento l\u00f3gico no qual os aplicativos podem ser abstra\u00eddos do ambiente em que realmente s\u00e3o executados. Os cont\u00eaineres virtualizam no n\u00edvel do sistema operacional enquanto as VMs virtualizam no n\u00edvel do hardware","title":"Conteinerizada"},{"location":"roteiros/5.K8s/#instalando-e-configurando-o-octavia-loadbalancer-para-openstack","text":"No servidor Main: Fa\u00e7a o download do arquivo loadbalancer-octavia.yaml no Github openstack-charmers/openstack-bundles Entre na pasta openstack Vamos pedir pro juju aplicar as modificacoes do bundle customizado com o overlay. juju deploy ./bundle.yaml --overlay loadbalancer-octavia.yaml","title":"Instalando e Configurando o Octavia (Loadbalancer para Openstack)"},{"location":"roteiros/5.K8s/#voces-ja-sabem-o-que-fazer-agora-ler-a-documentacao-sobre-k8s-e-docker-mas-de-olho-no-status-do-juju","text":"Agora vamos criar os certificados necess\u00e1rios. mkdir -p demoCA/newcerts touch demoCA/index.txt touch demoCA/index.txt.attr openssl genpkey -algorithm RSA -aes256 -pass pass:foobar -out issuing_ca_key.pem openssl req -x509 -passin pass:foobar -new -nodes -key issuing_ca_key.pem \\ -config /etc/ssl/openssl.cnf \\ -subj \"/C=US/ST=Somestate/O=Org/CN=www.example.com\" \\ -days 30 \\ -out issuing_ca.pem openssl genpkey -algorithm RSA -aes256 -pass pass:foobar -out controller_ca_key.pem openssl req -x509 -passin pass:foobar -new -nodes \\ -key controller_ca_key.pem \\ -config /etc/ssl/openssl.cnf \\ -subj \"/C=US/ST=Somestate/O=Org/CN=www.example.com\" \\ -days 30 \\ -out controller_ca.pem openssl req \\ -newkey rsa:2048 -nodes -keyout controller_key.pem \\ -subj \"/C=US/ST=Somestate/O=Org/CN=www.example.com\" \\ -out controller.csr openssl ca -passin pass:foobar -config /etc/ssl/openssl.cnf \\ -cert controller_ca.pem -keyfile controller_ca_key.pem \\ -create_serial -batch \\ -in controller.csr -days 30 -out controller_cert.pem cat controller_cert.pem controller_key.pem > controller_cert_bundle.pem","title":"Voc\u00eas j\u00e1 sabem o que fazer agora, Ler a documentacao sobre K8S e Docker, mas de olho no status do Juju."},{"location":"roteiros/5.K8s/#abra-o-cofre-vault-novamente","text":"Adicionando variavel de ambiente VAULT: export VAULT_ADDR=\"http://<IP of vault unit>:8200\" Removendo o selo, repita a opera\u00e7\u00e3o com 3 keys diferentes: vault operator unseal <Unseal Key> Autorizando o charm: export VAULT_TOKEN=<Initial Root Token> vault token create -ttl=10m Anote o token gerado pelo comando e use abaixo: juju run-action --wait vault/leader authorize-charm token=<token> juju run-action --wait vault/leader generate-root-ca Ainda no Servidor main , vamos aumentar alguns limites: openstack quota set --cores 100 [ID do Projeto] openstack quota set --instances 100 [ID do Projeto]","title":"Abra o cofre VAULT novamente..."},{"location":"roteiros/5.K8s/#configurando-o-octavia-com-as-alteracoes","text":"Passo1 juju config octavia \\ lb-mgmt-issuing-cacert=\"$(base64 issuing_ca.pem)\" \\ lb-mgmt-issuing-ca-private-key=\"$(base64 issuing_ca_key.pem)\" \\ lb-mgmt-issuing-ca-key-passphrase=foobar \\ lb-mgmt-controller-cacert=\"$(base64 controller_ca.pem)\" \\ lb-mgmt-controller-cert=\"$(base64 controller_cert_bundle.pem)\" Passo2 juju config octavia loadbalancer-topology=ACTIVE_STANDBY spare-pool-size=4 juju run-action --wait glance-simplestreams-sync/0 sync-images","title":"Configurando o Octavia com as alteracoes"},{"location":"roteiros/5.K8s/#_1","text":"","title":""},{"location":"roteiros/5.K8s/#hold-your-breath","text":"","title":"Hold your breath!"},{"location":"roteiros/5.K8s/#criando-imagem","text":"Passo1 juju run-action --wait octavia-diskimage-retrofit/leader retrofit-image","title":"Criando imagem"},{"location":"roteiros/5.K8s/#_2","text":"Passo2 openstack image list openstack image set --tag octavia-diskimage-retrofit --tag octavia-amphora [id amphora image] juju run-action --wait octavia/0 configure-resources No cap\u00edtulo 3, foi realizada a implanta\u00e7\u00e3o do Openstack no hardware dispon\u00edvel. Al\u00e9m de VMs, o Openstack consegue tamb\u00e9m manipular containers, tal qual o MaaS e o Juju. Contudo o grande problema \u00e9 que n\u00e3o basta apenas criar e destruir um container, \u00e9 preciso administrar uma complexa arquitetura, monitorando e controlando um conjunto de containers que representam uma implanta\u00e7\u00e3o de um sistema.","title":""},{"location":"roteiros/5.K8s/#webserver","text":"Criar uma inst\u00e2ncia m1.small com IP p\u00fablico no Openstack, nomea-la como juju-openstack Acessar a instancia criada Vamos criar um WebServer em NodeJS Criar o arquivo ~/hello-node/server.js #!/usr/bin/env nodejs var http = require('http'); var os = require('os'); var handleRequest = function(request, response) { console.log('Received request for URL: ' + request.url); response.writeHead(200); response.end('{ \"host\": ' + os.hostname() + ', \"message\": \"Hello World!\"}'); }; var www = http.createServer(handleRequest); www.listen(8080); console.log('Server running at http://localhost:8080/'); Testar o WebServer rodando localmente no terminal. sudo apt install nodejs ./server.js Exercise CheckPoint-1 WebServer De um print das Telas abaixo: Da aba network topology no OpenStack . Das regras do Security Group utilizado Da Aba do navegador com o WebServer Rodando.","title":"WebServer"},{"location":"roteiros/5.K8s/#instalar-o-docker","text":"Arquitetura Docker sudo apt-get update sudo apt install build-essential apt-transport-https curl curl -fsSL https://get.docker.com | sh - sudo usermod -aG docker $USER newgrp docker docker version docker run hello-world Criar uma um arquivo ~/hello-node/Dockerfile que dar\u00e1 origem ao container FROM node:6.9.2 EXPOSE 8080 COPY server.js . CMD node server.js Montar a imagem local (Cria um container com esta aplicacao webserver) docker build -t hello-node:v1 ./hello-node/ Rodar o container com a imagem criada. docker container run hello-node:v1 Exercise CheckPoint-2 Docker De um print das Telas abaixo: WebServer Rodando no navegador.","title":"Instalar o Docker"},{"location":"roteiros/5.K8s/#docker-hub","text":"Criar individualmente um login na https://hub.docker.com/ \u2022 Fazer o login no Docker \u2022 Aplicar a tag na imagem e dar o push do Docker Hub \u2022 Para mais detalhes docker --help Exercise QUESTOES-1 O que \u00e9 Docker Swarm? O que \u00e9 Docker Registry? O que \u00e9 Docker Engine?","title":"Docker Hub"},{"location":"roteiros/5.K8s/#kubernetes-aka-k8s","text":"Para facilitar o deploy do Kubernetes vamos utilizar uma \"velha conhecida\".","title":"Kubernetes aka k8s"},{"location":"roteiros/5.K8s/#deja-vu-juju-reborn","text":"O Dashboard do Openstack possui alguns termos (region, instance type, security group, etc) que s\u00e3o semelhantes ao da AWS. Como visto anteriormente, Juju consegue operar sobre Public Cloud, Private Cloud, Bare-metal e Container. Para o setup ficar completo, agora vamos utilizar o Juju sobre o Openstack. Dicas Documentacao - adicionar Openstack como cloud Documentacao - adicionar integrador obrigat\u00f3rio Bundle modificado do Kubernetes-core Acesse a inst\u00e2ncia m1.tiny criada no in\u00edcio do roteiro. Fazer a instala\u00e7\u00e3o do Juju. Adicione o Openstack como Cloud Provider no Juju. Fazer o deploy do Kubernetes-core Instalar kubectl no cliente via snap. sudo snap install kubectl --classic Verificar a configura\u00e7\u00e3o do Kubernetes via kubectl kubectl cluster-info Caso tenha problemas ver: documentacao-kubernetes Configurar o kubectl proxy para utiliza\u00e7\u00e3o externa na porta 8080. Acessar o Dashboard.","title":"Deja-vu (Juju Reborn)"},{"location":"roteiros/5.K8s/#fazendo-um-deploy","text":"Fazer o deploy da imagem docker criada na sess\u00e3o anterior kubectl run hello-node --image=[user]/hello-node:v1 --port=8080 Verificar no terminal: kubectl get all Verificar o deploy status no Dashboard Expandir o deploy para 5 r\u00e9plicas do pod Exercise CheckPoint-3 Dashboard Kubernetes De um print das Telas abaixo: Do dashboard Kubernetes com as 5 replicas","title":"Fazendo um Deploy"},{"location":"roteiros/5.K8s/#acessando-o-deploy","text":"Criar um servi\u00e7o que ir\u00e1 expor o deploy","title":"Acessando o Deploy"},{"location":"roteiros/5.K8s/#alternativa-i-clusterip-com-ingress","text":"kubectl expose deployment hello-node --type=ClusterIP Criar o arquivo ingress.yaml apiVersion: extensions/v1beta1 kind: Ingress metadata: name: hello-node-ingress spec: rules: - host: hello-node.[ip do kubernetes-worker].xip.io http: paths: - path: / backend: serviceName: hello-node servicePort: 8080 * Aplicar arquivo ingress ao K8s kubectl create -f ingress.yaml Exercise CheckPoint-4 Expose Service De um print das Telas abaixo: Do comando -> kubectl get all","title":"Alternativa I - ClusterIP com Ingress"},{"location":"roteiros/5.K8s/#alternativa-ii-nodeport","text":"kubectl expose deployment hello-node --type=NodePort Verificar qual porta foi designada e liberar o security group do worker juju run --unit kubernetes-worker/[# worker] \"open-port [porta]\" Exercise CheckPoint-4 Acessar o deploy De um print das Telas abaixo: Do comando -> kubectl get all WebServer Rodando no navegador utilizando a porta aberta.","title":"Alternativa II - NodePort"},{"location":"roteiros/5.K8s/#alterando-o-deploy","text":"Alterar o arquivo server.js Montar uma nova imagem com tag v2 e fa\u00e7a um push Fazer um deploy de um pod de testes Testar as altera\u00e7\u00f5es Fazer a implanta\u00e7\u00e3o imediata em produ\u00e7\u00e3o: kubectl set image deployment/hello-node hello-node=[user]/hello-node:v2 Exercise CheckPoint-5 Modificacao De um print das Telas abaixo: Do comando -> kubectl get all WebServer modificado Rodando no navegador utilizando a porta aberta.","title":"Alterando o deploy"},{"location":"roteiros/5.K8s/#conclusao-somente-para-pensar","text":"Voc\u00ea desempenhou uma implanta\u00e7\u00e3o em tempo real usando Kubernetes e DockerHub. Como seria uma arquitetura de Continuous Integration/Continuous Delivery (CI/CD) real utilizando Kubernetes?","title":"Conclus\u00e3o: SOMENTE PARA PENSAR"}]}